{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-b17e65fdb2a30e64.js","src/js/model.js","src/js/views/View.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-ff926815674bc302.js","node_modules/@parcel/runtime-js/lib/runtime-a3f140c599eac2d2.js","src/js/views/groupsView.js","src/js/views/usersView/payerView.js","src/js/views/usersView/sharerView.js","src/js/views/usersView/userMngtView.js","src/js/views/eventsView/eventsView.js","src/js/views/eventsView/eventsHeaderView.js","src/js/views/balanceView.js","src/js/views/usersView/debtsView.js","src/js/controller.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2G0cO\\\":\\\"index.1417488b.js\\\",\\\"41LG6\\\":\\\"revise.809c8e4f.png\\\",\\\"5k0fD\\\":\\\"delete.014e6afe.png\\\"}\"));","//  Group Instance\nexport class Group {\n  constructor(groupName, users, events) {\n    this.id = this._getRomdomId();\n    this.groupName = groupName;\n    this.users = users;\n    this.events = events;\n  }\n  _getRomdomId() {\n    return 'G_' + Math.random().toString(36).substr(2, 9);\n  }\n}\n\n//  User Instance\nexport class User {\n  constructor(userName, assets, debts, group) {\n    this.id = this._getRomdomId();\n    this.userName = userName;\n    this.assets = assets;\n    this.debts = debts;\n    this.group = group;\n    this.balance = this.assets - this.debts;\n  }\n  _getRomdomId() {\n    return 'U_' + Math.random().toString(36).substr(2, 9);\n  }\n}\n\n//  Event Instance\nexport class Event {\n  // prettier-ignore\n  constructor(spend, date, type, productName, note, payer, payerId, sharer, sharerId, group, groupId, isAllMember) {\n    this.id = this._getRomdomId();\n    this.spend = spend;\n    this.date = date;\n    this.type = type;\n    this.productName = productName;\n    this.note = note;\n    this.payer = payer;\n    this.payerId = payerId;\n    this.sharer = sharer;\n    this.sharerId = sharerId;\n    this.group = group;\n    this.groupId = groupId;\n    this.isAllMember = isAllMember;\n  }\n\n  _getRomdomId() {\n    return 'E_' + Math.random().toString(36).substr(2, 9);\n  }\n}\n\nexport const state = {\n  activeGroup: [],\n  groupObject: [],\n  sharerId: [],\n  sharer: [],\n  eventDateList: [],\n};\n\n//------------------------GROUP------------------------\n\nexport const createNewGroup = async function (newGroupName) {\n  const newGroup = new Group(newGroupName, [], []);\n\n  // 將新群組設定成active\n  setActiveGroup(newGroup);\n  // 建立預設使用者\n  createDefaultUserObject(newGroup);\n  state.groupObject.push(newGroup);\n  // 更新新使用者的balance\n  updateUsersBalance();\n  storeLocalStorage();\n};\n\nexport const deleteGroup = function (id) {\n  const target = state.groupObject.find(group => group.id === id);\n  const index = state.groupObject.indexOf(target);\n  // 刪除特定群組\n  state.groupObject.splice(index, 1);\n  // 更新active群組\n  state.activeGroup.splice(0, 1);\n  state.activeGroup.push(state.groupObject[index - 1 > 0 ? index - 1 : 0]);\n  storeLocalStorage();\n};\n\nexport const setActiveGroup = async function (group = undefined) {\n  // 若group參數無值，則active群組依舊為目前的active群組\n  if (!group) {\n    const activeGroup = state.groupObject.find(\n      group => group.id === state.activeGroup[0].id\n    );\n    const index = state.groupObject.indexOf(activeGroup);\n    group = state.groupObject[index];\n  }\n\n  // 若group參數有值，設定新的active群組\n  state.activeGroup.splice(0, 1);\n  state.activeGroup.push(group);\n  storeLocalStorage();\n};\n\n//------------------------USER------------------------\n\nexport const createNewUser = function (newUserName) {\n  if (newUserName.value === '') {\n    alert('名稱不可為空');\n    return;\n  }\n\n  // 建立New User Instance\n  createNewUserObject(newUserName);\n  storeLocalStorage();\n  newUserName.value = '';\n};\n\nconst createNewUserObject = function (newUserName) {\n  if (\n    state.activeGroup[0].users\n      .map(user => user.userName === newUserName)\n      .includes(true)\n  ) {\n    alert('已有相同名稱，請重新命名');\n    return;\n  }\n\n  // 建立New User Instance\n  const newUser = new User(newUserName, 0, 0, state.activeGroup[0].groupName);\n  const index = state.groupObject.findIndex(\n    group => group.id === state.activeGroup[0].id\n  );\n\n  state.groupObject[index].users.push(newUser);\n  setActiveGroup(state.groupObject[index]);\n  storeLocalStorage();\n};\n\nexport const deleteUser = function (id) {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n  const obj = state.activeGroup[0].users.find(user => user.id === id);\n  const index = state.activeGroup[0].users.indexOf(obj);\n\n  if (index === 0) {\n    alert('無法刪除自己');\n    return;\n  } else if (obj.balance !== 0) {\n    alert('帳款尚未平衡');\n    return;\n  } else {\n    state.groupObject[activeGroupIndex].users.splice(index, 1);\n    setActiveGroup(state.groupObject[activeGroupIndex]);\n  }\n  storeLocalStorage();\n};\n\nconst updateUsersAmont = function (newEvent) {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  //更新使用者應收額\n  const payer = state.groupObject[activeGroupIndex].users.find(\n    payer => payer.id === `${newEvent.payerId}`\n  );\n  payer.assets = Number(payer.assets) + Number(newEvent.spend);\n\n  //更新使用者應付額\n  for (const i of newEvent.sharer) {\n    const [sharer] = state.groupObject[activeGroupIndex].users.filter(\n      sharer => sharer.id === `${newEvent.sharerId[newEvent.sharer.indexOf(i)]}`\n    );\n\n    if (!sharer) return;\n\n    sharer.debts = Number(\n      Number(sharer.debts) +\n        Number((newEvent.spend / state.sharer.length).toFixed(2))\n    ).toFixed(2);\n  }\n\n  updateUsersBalance();\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n};\n\nexport const updateUsersBalance = function () {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  //更新active群組中的user balance\n  if (!state.groupObject[activeGroupIndex]) return;\n\n  state.groupObject[activeGroupIndex].users.map(\n    user => (user.balance = user.assets - user.debts)\n  );\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n};\n\nexport const reviesUserInfo = function (id, newUserName) {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const groupIndex = state.groupObject.indexOf(activeGroup);\n  const target = state.groupObject[groupIndex].users.find(\n    user => user.id === id\n  );\n\n  target.userName = newUserName;\n};\nexport const reviesGroupInfo = function (id, newGroupName) {\n  const target = state.groupObject.find(group => group.id === id);\n\n  target.groupName = newGroupName;\n};\n\n//------------------------EVENT------------------------\n\nexport const createNewEvent = function () {\n  // 確認使用者為分款者的名單\n  checkSharerList();\n  if (state.sharerId.length === 0) {\n    alert('分款者為必填');\n    return;\n  }\n  // 建立new Event Instance\n  createNewEventObject();\n  // 透過時間排序事件\n  sortEventsOrder();\n  storeLocalStorage();\n\n  state.sharerId = [];\n  state.sharer = [];\n};\n\nconst createNewEventObject = function () {\n  const spend = document.querySelector('.event-form__input--spend');\n  const date = document.querySelector('.event-form__input--date');\n  const type = document.querySelector('.event-form__input--type');\n  const productName = document.querySelector('.event-form__input--name');\n  const note = document.querySelector('.event-form__input--note');\n  const payerId = document.querySelector('.event-form__input--payer');\n  const payer = state.activeGroup[0].users.find(\n    user => user.id === payerId.value\n  );\n\n  if (\n    !Number.isFinite(+spend.value) ||\n    Number(spend.value) < 0 ||\n    Number(spend.value) % 1 !== 0\n  ) {\n    alert('請輸入正整數');\n    state.sharerId = [];\n    state.sharer = [];\n    return;\n  }\n\n  // 建立new Event Instance\n  const newEvent = new Event(\n    spend.value,\n    date.value,\n    type.value,\n    productName.value,\n    note.value,\n    payer.userName,\n    payerId.value,\n    state.sharer,\n    state.sharerId,\n    state.activeGroup[0].groupName,\n    state.activeGroup[0].id,\n    state.sharerId.length === state.activeGroup[0].users.length ? true : false\n  );\n\n  const index = state.groupObject.findIndex(\n    group => group.id === state.activeGroup[0].id\n  );\n\n  state.groupObject[index].events.push(newEvent);\n  setActiveGroup(state.groupObject[index]);\n  updateUsersAmont(newEvent);\n  storeLocalStorage();\n};\n\nexport const deleteEvent = function (id) {\n  // 刪除特定event\n  const obj = state.activeGroup[0].events.find(event => event.id === id);\n  const index = state.activeGroup[0].events.indexOf(obj);\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  updateDeleteEventAmont(id);\n  state.groupObject[activeGroupIndex].events.splice(index, 1);\n  sortEventsOrder();\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n  storeLocalStorage();\n};\n\nexport const updateDeleteEventAmont = function (id) {\n  // 更新被刪除event中使用者數值\n\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  const deletedEvent = state.groupObject[activeGroupIndex].events.find(\n    event => event.id === id\n  );\n\n  //更新收款者的值;\n  const payer = state.groupObject[activeGroupIndex].users.find(\n    user => user.id === deletedEvent.payerId\n  );\n\n  payer.assets = Number(payer.assets) - Number(deletedEvent.spend);\n\n  //更新分款者的值;\n  for (const i of deletedEvent.sharer) {\n    const [sharer] = state.groupObject[activeGroupIndex].users.filter(\n      user =>\n        user.id === `${deletedEvent.sharerId[deletedEvent.sharer.indexOf(i)]}`\n    );\n\n    if (!sharer) return;\n\n    sharer.debts = Number(\n      Number(sharer.debts) -\n        Number((deletedEvent.spend / deletedEvent.sharer.length).toFixed(2))\n    ).toFixed(2);\n  }\n  // 更新使用者balance值\n  updateUsersBalance();\n};\n\nexport const createEventDateHeader = function (event) {\n  // 建立日期標誌\n  const dateSet = new Set(state.eventDateList);\n  if (dateSet.has(event.date)) return false;\n  state.eventDateList.push(event.date);\n  storeLocalStorage();\n  return true;\n};\n\nconst checkSharerList = function () {\n  // 確認使用者中誰為分款者\n  document.querySelectorAll('input[type=checkbox]:checked').forEach(el => {\n    state.sharerId.push(el.classList[1]);\n    state.sharer.push(el.value);\n    if (state.sharer.at(-1) === 'selectedAll') {\n      state.sharer.splice(-1, 1);\n      state.sharerId.splice(-1, 1);\n    }\n  });\n};\n\nexport const sortEventsOrder = function () {\n  //透過日期排序Event順序\n  state.activeGroup[0].events = state.activeGroup[0].events\n    .map(event => event)\n    .sort((a, b) => new Date(a.date) - new Date(b.date));\n};\n\n//------------------------DEBT RELATIONSHIP------------------------\n\nexport const debtRelationship = function () {\n  const debtRelation = [];\n  const renderArr = [];\n  if (!state.activeGroup[0]) return;\n\n  //在DebtRelation Array中push所有user的userName與balance\n  state.activeGroup[0].users.map(obj => {\n    debtRelation.push([`${obj.userName}`, `${obj.balance}`]);\n  });\n\n  //將DebtRelation內元素由大至小排序\n  debtRelation.sort((a, b) => b[1] - a[1]);\n\n  //宣告所需變數\n  let creditor = debtRelation[0][0];\n  let debtor = debtRelation[debtRelation.length - 1][0];\n  let creditorPayment = +debtRelation[0][1];\n  let debtorPayment = +debtRelation[debtRelation.length - 1][1];\n\n  //若DebtRelation內只有預設使用者，或是尚無應收應付帳款，則顯示尚無應收/應付帳款\n  if (\n    debtRelation.length === 1 ||\n    (creditorPayment === 0 && debtorPayment === 0)\n  )\n    return false;\n  else {\n    //若有應收/應付帳款時，執行此迴圈\n    while (creditorPayment > 0 && debtorPayment < 0) {\n      if (creditorPayment > debtorPayment) {\n        //更新debtRelation帳款\n        if (Math.abs(creditorPayment) > Math.abs(debtorPayment)) {\n          debtRelation[0][1] = creditorPayment + debtorPayment;\n          debtRelation[debtRelation.length - 1][1] =\n            debtorPayment - debtorPayment;\n\n          renderArr.push({ creditor, debtor, payment: -debtorPayment });\n        } else if (\n          Math.abs(creditorPayment) < Math.abs(debtorPayment) ||\n          (Math.abs(creditorPayment) === Math.abs(debtorPayment) &&\n            creditorPayment !== 0)\n        ) {\n          debtRelation[0][1] = creditorPayment - creditorPayment;\n          debtRelation[debtRelation.length - 1][1] =\n            debtorPayment + creditorPayment;\n          renderArr.push({ creditor, debtor, payment: creditorPayment });\n        } else {\n          return;\n        }\n\n        //重新排序debtRelation\n        debtRelation.sort((a, b) => b[1] - a[1]);\n\n        //重新宣告變數\n        creditor = debtRelation[0][0];\n        debtor = debtRelation[debtRelation.length - 1][0];\n        creditorPayment = Number(debtRelation[0][1]);\n        debtorPayment = Number(debtRelation[debtRelation.length - 1][1]);\n      }\n    }\n    return renderArr;\n  }\n};\n\n//------------------------INIT------------------------\n\nconst getDeviceHeight = () => {\n  let vh = window.innerHeight * 0.01;\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\n  console.log(`執行成功，目前高度為${vh * 100}px`);\n  console.log('hey');\n};\n\nconst createDefaultUserObject = function (group) {\n  // prettier-ignore\n  if (group.users.length === 0) {\n    newUser = new User('自己', 0, 0, state.activeGroup[0].groupName);\n    group.users.push(newUser);\n    setActiveGroup(group)\n  } else return;\n};\n\nexport const isAllMember = () => {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  state.groupObject[activeGroupIndex].events.map(event => {\n    event.isAllMember =\n      event.sharerId.length === state.groupObject[activeGroupIndex].users.length\n        ? true\n        : false;\n  });\n\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n  storeLocalStorage();\n};\n\nconst createDefaultGroupObject = function () {\n  if (state.groupObject.length === 0) {\n    createNewGroup('預設群組');\n  }\n};\n\nconst setDefaultDate = function () {\n  const now = new Date();\n  const year = now.getFullYear();\n  const month = `${now.getMonth() + 1}`.padStart(2, 0);\n  const dates = `${now.getDate()}`.padStart(2, 0);\n  const todayDate = `${year}-${month}-${dates}`;\n  const dateInput = document.querySelector('.event-form__input--date');\n  dateInput.setAttribute('value', todayDate);\n};\n\n//------------------------LOCAL STORAGE------------------------\n\nexport const storeLocalStorage = function () {\n  persistLocalData();\n  getLocalData();\n};\n\nconst persistLocalData = function () {\n  localStorage.setItem('groups', JSON.stringify(state.groupObject));\n  localStorage.setItem('activeGroup', JSON.stringify(state.activeGroup));\n};\n\nconst getLocalData = function () {\n  const groupsData = JSON.parse(localStorage.getItem('groups'));\n  const activeGroupData = JSON.parse(localStorage.getItem('activeGroup'));\n  if (!activeGroupData || !groupsData) return;\n  state.groupObject = groupsData;\n  state.activeGroup[0] = activeGroupData[0];\n};\n\nexport const deleteAllLocalStorage = () => {\n  localStorage.clear();\n};\n\nconst init = function () {\n  // console.log('hey');\n  getDeviceHeight();\n  // console.log('test');\n  getLocalData();\n  createDefaultGroupObject();\n  setDefaultDate();\n  updateUsersBalance();\n  persistLocalData();\n};\n\ninit();\n","export default class View {\n  render(data, clear = true) {\n    this._data = data;\n\n    const markup = this._generateMarkup();\n    if (clear) {\n      this._clear();\n    }\n\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\n  }\n\n  _clear() {\n    this._parentElement.innerHTML = '';\n  }\n\n  renderError(message = this._errorMessage) {\n    const markup = `\n      <div class=\"error\">\n        <div>\n          <svg>\n            <use href=\"${icons}#icon-alert-triangle\"></use>\n          </svg>\n        </div>\n        <p>${message}</p>\n      </div>\n    `;\n    this._clear();\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\n  }\n\n  renderMessage(message = this._message) {\n    const markup = `\n      <div class=\"message\">\n        <div>\n          <svg>\n            <use href=\"${icons}#icon-smile\"></use>\n          </svg>\n        </div>\n        <p>${message}</p>\n      </div>\n    `;\n    this._clear();\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\n  }\n}\n","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('2G0cO') + require('./helpers/bundle-manifest').resolve(\"41LG6\");","module.exports = require('./helpers/bundle-url').getBundleURL('2G0cO') + require('./helpers/bundle-manifest').resolve(\"5k0fD\");","import View from './View.js';\nimport imgRevise from 'url:../../img/revise.png';\nimport imgDelete from 'url:../../img/delete.png';\n\nclass GroupsView extends View {\n  _parentElement = document.querySelector('.group-list');\n  _group = document.querySelector('.group');\n  // render all groups\n  _addHandlerRender(handler) {\n    window.addEventListener('load', handler);\n    this._group.addEventListener('click', e => {\n      if (\n        !e.target.closest('.group') ||\n        e.target.classList.contains('group__item--revise') ||\n        e.target.classList.contains('group__item--delete')\n      )\n        return;\n      handler();\n    });\n  }\n\n  _addHandlerAddActive(handler) {\n    window.addEventListener('load', () => {\n      this._generateActiveGroup(handler());\n    });\n\n    this._group.addEventListener('click', e => {\n      if (e.target.classList.contains('group__item--delete')) {\n        return;\n      }\n\n      if (!e.target.closest('.group-list__info')) {\n        this._generateActiveGroup(handler());\n        return;\n      }\n\n      const target = e.target.closest('.group-list__info').classList[1];\n      this._generateActiveGroup(handler(target));\n    });\n  }\n\n  _addHandlerNewGroup(handler) {\n    const newGroupForm = document.querySelector('.group-create__form');\n    const newGroupName = document.querySelector('.newGroupName');\n\n    newGroupForm.addEventListener('submit', e => {\n      e.preventDefault();\n      handler();\n      newGroupName.value = '';\n      newGroupForm.classList.add('hidden');\n    });\n  }\n\n  _addHandlerReviseGroup(handler) {\n    this._parentElement.addEventListener('click', e => {\n      if (!e.target.classList.contains('group__item--revise')) return;\n\n      const target = e.target.parentNode.parentNode.classList[1];\n      const newGroupName = e.target.parentNode.children[1];\n\n      this._groupsSetDefault();\n      this._groupsSetInputField(newGroupName);\n\n      newGroupName.addEventListener('keypress', e => {\n        if (e.key !== 'Enter') return;\n\n        if (newGroupName.value === '') {\n          newGroupName.setAttribute('value', newGroupName.dataset.name);\n        }\n\n        if (newGroupName.value !== '') {\n          if (handler(target, newGroupName.value)) {\n            alert('已有相同群組，請重新命名');\n            newGroupName.value = '';\n            return;\n          }\n\n          e.preventDefault();\n          newGroupName.setAttribute('value', newGroupName.value);\n          handler(target, newGroupName.value);\n        }\n        newGroupName.setAttribute('readonly', '');\n        newGroupName.removeAttribute('placeholder');\n      });\n    });\n  }\n\n  _addHandlerDeleteGroup(handler) {\n    this._parentElement.addEventListener('click', function (e) {\n      if (!e.target.closest('.group__item--delete')) return;\n      const target = e.target.closest('.group-list__info').classList[1];\n      handler(target);\n    });\n  }\n\n  _addHandlerToggleSidebar() {\n    window.addEventListener('click', e => {\n      const toggleGroupVisible = document.getElementById('toggleGroupArea');\n      const eventGroupBtn = e.target.classList.contains('event__btn--groups');\n      const groupCloseBtn = e.target.classList.contains('group__btn--close');\n      const groupArea = e.target.closest('.group');\n      const groupList = e.target.closest('.group-list__info');\n\n      if (\n        eventGroupBtn ||\n        groupCloseBtn ||\n        (toggleGroupVisible.checked && !groupArea && !groupList)\n      ) {\n        this._groupsSetDefault();\n        toggleGroupVisible.checked = !toggleGroupVisible.checked;\n      }\n    });\n  }\n\n  _addHandlerToggleCreateWindow() {\n    const createBtn = document.querySelector('.group-create__btn');\n    const newGroupForm = document.querySelector('.group-create__form');\n    const newGroupName = document.querySelector('.newGroupName');\n    createBtn.addEventListener('click', function () {\n      newGroupForm.classList.toggle('hidden');\n      newGroupName.focus();\n    });\n  }\n\n  _groupsSetDefault = function () {\n    const allGroupNames = document.querySelectorAll(\n      '.group-list__info .group__item--headline'\n    );\n\n    allGroupNames.forEach(users => {\n      users.setAttribute('readonly', '');\n      users.removeAttribute('placeholder');\n      users.value = users.dataset.name;\n    });\n  };\n\n  _groupsSetInputField = function (newGroupName) {\n    newGroupName.removeAttribute('readonly');\n    newGroupName.value = '';\n    newGroupName.setAttribute('placeholder', '新群組名');\n    newGroupName.focus();\n  };\n\n  _addHandlerDeleteAllGroups = function (handler) {\n    window.addEventListener('click', e => {\n      if (!e.target.classList.contains('event__btn--deleteAllInfo')) return;\n\n      const firstCheck = confirm(\n        '您確定要刪除所有資料嗎？將會刪除所有的群組、使用者及記錄。'\n      );\n\n      if (firstCheck) {\n        const secondCheck = confirm('您確定嗎？');\n        if (secondCheck) {\n          handler();\n          alert('所有資料已被刪除！');\n          location.reload();\n        } else return;\n      } else return;\n    });\n  };\n\n  _generateActiveGroup(id) {\n    const allGroup = document.querySelectorAll('.group-list__info');\n    allGroup.forEach(group => {\n      group.classList.remove('active');\n    });\n\n    if (!document.querySelector(`.${id}`)) {\n      return;\n    }\n\n    document.querySelector(`.${id}`).classList.add('active');\n  }\n\n  _generateMarkup() {\n    return this._data\n      .map(\n        group => `\n      <div class=\"group-list__info ${group.id}\">\n        <div class=\"group__items\">\n          <div class=\"group__item--icon\">\n            <span>${group.groupName.charAt(0)}</span>\n          </div>\n          <input\n            class=\"group__item--headline\"\n            autocomplete=\"off\"\n            readonly\n            required\n            maxlength=\"5\"\n            placeholder=\"\"\n            value=\"${group.groupName}\"\n            data-name=\"${group.groupName}\"\n          />\n          <div class=\"group__item--subhead\">\n            ${group.users.length}位成員\n          </div>\n          <img class=\"group__item--revise\" src=\"${imgRevise}\"></img>\n          <img class=\"group__item--delete\" src=\"${imgDelete}\"></img>\n        </div>\n      </div>`\n      )\n      .reverse()\n      .join('');\n  }\n}\n\nexport default new GroupsView();\n","import View from '../View';\nclass PayerView extends View {\n  _parentElement = document.querySelector('.event-form__input--payer');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', () => {\n      handler();\n    });\n  }\n\n  _generateMarkup() {\n    return this._data\n      .map(user => `<option value=\"${user.id}\">${user.userName}</option>`)\n      .join('');\n  }\n}\n\nexport default new PayerView();\n","import View from '../View';\nclass SharerView extends View {\n  _parentElement = document.querySelector('.event-form__input--sharers');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', () => {\n      handler();\n    });\n  }\n\n  _addHandlerMarkSharer() {\n    this._parentElement.addEventListener('click', e => {\n      if (!e.target.classList.contains('event-form__input--sharer')) return;\n\n      if (!e.target.previousElementSibling.checked) {\n        e.target.classList.add('checked');\n      }\n      if (e.target.previousElementSibling.checked) {\n        e.target.classList.remove('checked');\n      }\n    });\n  }\n\n  _addHandlerSelectAll() {\n    window.addEventListener('click', e => {\n      if (!e.target.classList.contains('selectedAll')) return;\n      const selectedAllCheckbox = document.querySelector(\n        '.selectedAllCheckbox'\n      );\n      const allCheckboxes = document.querySelectorAll('.checkbox');\n\n      if (!selectedAllCheckbox.checked) {\n        allCheckboxes.forEach(checkbox => {\n          checkbox.checked = true;\n          checkbox.nextElementSibling.classList.add('checked');\n        });\n      }\n\n      if (selectedAllCheckbox.checked) {\n        allCheckboxes.forEach(checkbox => {\n          checkbox.checked = false;\n          checkbox.nextElementSibling.classList.remove('checked');\n        });\n        return;\n      }\n    });\n  }\n\n  _generateMarkup() {\n    return (\n      this._data\n        .map(\n          user => `\n        <input class=\"checkbox ${user.id}\" type=\"checkbox\" id=\"${user.id}\" value=\"${user.userName}\"/>\n        <label class=\"event-form__input--sharer\" for=\"${user.id}\">${user.userName}</label>\n        `\n        )\n        .join('') +\n      (this._data.length > 1\n        ? `\n        <input class=\"selectedAllCheckbox\" type=\"checkbox\" id=\"selectedAll\" value = \"selectedAll\">\n        <label class=\"event-form__input--sharer selectedAll\" for=\"selectedAll\">全選</label>\n        `\n        : '')\n    );\n    // : '';\n    // this._data.length >\n    // 1\n    // ? `\n    // <input class=\"checkbox selectedAll\" type=\"checkbox\" id=\"selectedAll\" value=\"全選\"/>\n    // <label class=\"event-form__input--sharer\" for=\"selectedAll\">全選</label>\n    //   `\n    // : '';\n  }\n}\n\nexport default new SharerView();\n","import View from '../View.js';\nimport imgRevise from 'url:../../../img/revise.png';\nimport imgDelete from 'url:../../../img/delete.png';\n\nclass UserMgntView extends View {\n  _parentElement = document.querySelector('.user__infos');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', handler);\n  }\n\n  _addHandlerNewUser(handler) {\n    const newUserName = document.querySelector(\n      '.user-form__input--newUserName'\n    );\n    const allUserInfos = document.querySelector('.user__infos');\n    const newUserForm = document.querySelector('.user-form');\n    const newUserNameInput = document.querySelector(\n      '.user-form__input--newUserName'\n    );\n\n    newUserForm.addEventListener('submit', e => {\n      e.preventDefault();\n      handler(newUserName.value);\n\n      const newUserId =\n        allUserInfos.children[allUserInfos.children.length - 1].id;\n\n      document.querySelector(`.user__info #${newUserId}`).scrollIntoView({\n        block: 'start',\n        inline: 'nearest',\n        behavior: 'smooth',\n      });\n\n      newUserNameInput.value = '';\n    });\n  }\n\n  _addHandlerDeleteUser(handler) {\n    document.querySelector('.userMngt').addEventListener('click', e => {\n      if (!e.target.classList.contains('user__info__btn--delete')) return;\n      const target = e.target.parentElement.parentElement.id;\n      handler(target);\n    });\n  }\n\n  _addHandlerToggleWindow() {\n    window.addEventListener('click', e => {\n      const eventUserMngtBtn = e.target.classList.contains(\n        'event__btn--usersMngt'\n      );\n      const userMngtWindow = document.querySelector('.userMngt');\n      const userMngtCloseBtn = e.target.classList.contains(\n        'userMngt__btn--close'\n      );\n      const userInfoButtons = e.target.closest('.user__info__btns');\n      const newUserForm = document.querySelector('.user-form');\n\n      // e.target.closest('.userMngt');\n      if (\n        eventUserMngtBtn ||\n        userMngtCloseBtn ||\n        (!userMngtWindow.classList.contains('hidden') &&\n          !e.target.closest('.userMngt') &&\n          !userInfoButtons)\n      ) {\n        userMngtWindow.classList.toggle('hidden');\n        this._usersSetDefault();\n        newUserForm.classList.add('hidden');\n      }\n    });\n  }\n\n  _addHandlerToggleNewUserWindow() {\n    const createNewUserBtn = document.querySelector(\n      '.userMngt-header__btn--createNewUser'\n    );\n    const newUserName = document.querySelector(\n      '.user-form__input--newUserName'\n    );\n\n    createNewUserBtn.addEventListener('click', function () {\n      const newUserForm = document.querySelector('.user-form');\n\n      newUserForm.classList.toggle('hidden');\n      newUserName.focus();\n    });\n  }\n\n  _addHandlerReviseUser(handler) {\n    this._parentElement.addEventListener('click', e => {\n      if (!e.target.classList.contains('user__info__btn--revise')) return;\n      const allUserNames = document.querySelectorAll('.user__info--name');\n      const target = e.target.parentNode.parentNode.id;\n      const userName = e.target.parentNode.parentNode.children[0];\n\n      this._usersSetDefault();\n      this._usersSetInputField(userName);\n\n      allUserNames.forEach(user =>\n        user.addEventListener('keypress', e => {\n          if (e.key === 'Enter') {\n            if (userName.value === '') {\n              userName.setAttribute('value', userName.dataset.name);\n            } else {\n              userName.setAttribute('value', userName.value);\n            }\n            userName.setAttribute('readonly', '');\n            userName.removeAttribute('placeholder');\n            handler(target, userName.value);\n          } else {\n            return;\n          }\n        })\n      );\n    });\n  }\n\n  _usersSetDefault = function () {\n    const allUserNames = document.querySelectorAll('.user__info--name');\n\n    allUserNames.forEach(user => {\n      user.setAttribute('readonly', '');\n      user.removeAttribute('placeholder');\n      user.value = user.dataset.name;\n    });\n  };\n\n  _usersSetInputField = function (userName) {\n    userName.setAttribute('data-name', userName.value);\n    userName.removeAttribute('readonly');\n    userName.removeAttribute('value');\n    userName.setAttribute('placeholder', '請輸入新名稱');\n    userName.value = '';\n    userName.focus();\n  };\n  // _userRevise(e) {\n  //   const userNames = document.querySelectorAll('.user__info--name');\n  //   if (!e.target.classList.contains('user__btn--revise')) return;\n\n  //   const obj = model.state.activeGroup[0].users.find(\n  //     obj => obj.id === e.target.parentNode.parentNode.id\n  //   );\n  //   const userName = e.target.parentNode.parentNode.children[0];\n\n  //   userNames.forEach(users => {\n  //     users.setAttribute('readonly', '');\n  //     users.removeAttribute('placeholder');\n  //     users.value = users.dataset.name;\n  //   });\n\n  //   userName.setAttribute('data-name', userName.value);\n  //   userName.removeAttribute('readonly');\n  //   userName.removeAttribute('value');\n  //   userName.setAttribute('placeholder', '請輸入新名稱');\n  //   userName.value = '';\n  //   userName.focus();\n\n  //   document.querySelector('.user__btn--OK').addEventListener(\n  //     'click',\n  //     () => {\n  //       if (\n  //         model.state.activeGroup[0].users\n  //           .map(user => user.userName === userName.value)\n  //           .includes(true)\n  //       ) {\n  //         alert('已有相同名稱，請重新輸入');\n  //         userName.value = '';\n\n  //         return;\n  //       }\n\n  //       if (userName.value === '') {\n  //         userName.setAttribute('value', userName.dataset.name);\n  //       } else {\n  //         userName.setAttribute('value', userName.value);\n  //         obj.userName = userName.value;\n  //       }\n  //       userName.setAttribute('readonly', '');\n  //       userName.removeAttribute('placeholder');\n  //       this._renderAll();\n  //       model.storeLocalStorage();\n  //     },\n  //     { once: true }\n  //   );\n\n  //   document\n  //     .querySelectorAll('.user__info--name')\n\n  //     .forEach(user =>\n  //       user.addEventListener('keypress', e => {\n  //         if (e.key === 'Enter') {\n  //           if (\n  //             model.state.activeGroup[0].users\n  //               .map(user => user.userName === userName.value)\n  //               .includes(true)\n  //           ) {\n  //             alert('已有相同名稱，請重新輸入');\n  //             userName.value = '';\n  //             return;\n  //           }\n\n  //           if (userName.value === '') {\n  //             userName.setAttribute('value', userName.dataset.name);\n  //           } else {\n  //             userName.setAttribute('value', userName.value);\n  //             obj.userName = userName.value;\n  //           }\n  //           userName.setAttribute('readonly', '');\n  //           userName.removeAttribute('placeholder');\n  //           this._renderAll();\n  //           model.storeLocalStorage();\n  //         } else {\n  //           return;\n  //         }\n  //       })\n  //     );\n  // }\n\n  _generateMarkup() {\n    return this._data\n      .map(\n        user => `\n        <div class=\"user__info\" id=${user.id}>\n          <input class=\"user__info--name\" id=${user.id} maxlength=\"5\" autocomplete=\"off\" readonly value=\"${user.userName}\" data-name=\"${user.userName}\">\n\n          <div class=\"user__info__btns\">\n            <img class=\"user__info__btn--revise\"src=\"${imgRevise}\"></img>\n            <img class=\"user__info__btn--delete\"src=\"${imgDelete}\"></img>\n          </div>\n      </div>`\n      )\n      .join('');\n  }\n}\n\nexport default new UserMgntView();\n","import View from '../View';\n\nclass EventsView extends View {\n  _parentElement = document.querySelector('.event-list');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', handler);\n  }\n  _addHandlerNewEvent(handler) {\n    const eventForm = document.querySelector('.event-form');\n    eventForm.addEventListener('submit', function (e) {\n      e.preventDefault();\n      handler();\n    });\n  }\n\n  _addHandlerDeleteEvent(handler) {\n    this._parentElement.addEventListener('click', function (e) {\n      const target = e.target.id;\n      if (!e.target.classList.contains('event__info__btn--delete')) return;\n      handler(target);\n    });\n  }\n\n  _addHandlerScrolltoEventTop() {\n    window.addEventListener('click', function (e) {\n      if (!e.target.classList.contains('event__btn--gotoTop')) return;\n\n      document.querySelector('.event__content')?.scrollIntoView({\n        block: 'start',\n        inline: 'nearest',\n        behavior: 'smooth',\n      });\n    });\n  }\n\n  _generateMarkup() {\n    const internationalNumberFormat = new Intl.NumberFormat('en-US');\n\n    return ` \n      <div class=\"event__info\">\n        <div class=\"event__info__btn--delete\" id=${this._data.id}>x</div>\n          <div class=\"event__info--group\">\n            <span class=\"event__info--group-value\">${this._data.group}</span>\n          </div>\n        <div class=\"event__product\">\n          <div class=\"event__info--type\">\n            <span class=\"event__info--type-value\">${this._data.type}</span>\n          </div>\n          <div class=\"event__info--productName\">\n            <span class=\"event__info--productName-value\">${\n              this._data.productName\n            }\n            </span>\n          </div>\n          <div class=\"event__info--note\">\n            <span class=\"event__info--note-value\">${this._data.note}</span>\n          </div>\n        </div>\n        <div class=\"event__info--spend\">\n          <span class=\"event__info--spend-value\">\n            ${internationalNumberFormat.format(this._data.spend)}\n          </span>\n          <span class=\"event__info--spend-unit\">NTD</span>\n        </div>\n        <div class=\"event__info--payer\">\n          <class=\"event__info--payer-value\">付款人 : ${this._data.payer}</span>\n        </div>\n        <div class=\"event__info--sharer\">\n          <span class=\"event__info--sharer-value\">分款人 :\n          ${this._data.isAllMember ? '全員' : this._data.sharer}\n          </span>\n        </div>\n      </div>\n      `;\n  }\n}\n\nexport default new EventsView();\n","import View from '../View';\n\nclass EventsHeaderView extends View {\n  _parentElement = document.querySelector('.event-list');\n\n  _addHandlerNewEventHeader(handler) {\n    handler();\n  }\n\n  _generateMarkup() {\n    return `\n      <div class=\"event__content\">\n        <div class=\"event__content--dateHeader\">${this._data.date}</div>\n        <div class=\"event__infos Date${this._data.date}\"></div>\n      </div>\n      `;\n  }\n}\n\nexport default new EventsHeaderView();\n","import View from './View';\n\nclass BalanceView extends View {\n  _parentElement = document.querySelector('.balance__infos');\n\n  _addHandlerToggleSidebar() {\n    window.addEventListener('click', e => {\n      const balanceSidebar = document.getElementById('toggleBalanceArea');\n      const eventBalanceBtn = e.target.classList.contains(\n        'event__btn--balance'\n      );\n      const balanceCloseBtn = e.target.classList.contains(\n        'balance__btn--close'\n      );\n      const balanceArea = e.target.closest('.balance');\n\n      if (\n        eventBalanceBtn ||\n        balanceCloseBtn ||\n        balanceSidebar.checked & !balanceArea\n      ) {\n        balanceSidebar.checked = !balanceSidebar.checked;\n      }\n    });\n  }\n\n  _generateMarkup() {\n    const internationalNumberFormat = new Intl.NumberFormat('en-US');\n\n    return this._data\n      .map(\n        user => `\n      <div class=\"balance__info\" id=${user.id}>\n        <div class=\"balance__info--name\"><strong>${user.userName}</strong></div>\n        <div class=\"balance__info--money\">\n        ${\n          Number(Math.round(user.balance)) > 0\n            ? `需收${internationalNumberFormat.format(\n                Number(Math.round(user.balance))\n              )}元`\n            : Number(Math.round(user.balance)) === 0\n            ? '無'\n            : `需付${internationalNumberFormat.format(\n                Number(Math.round(-user.balance))\n              )}元\n            `\n        }\n        </div>\n      </div>`\n      )\n      .join('');\n  }\n}\n\nexport default new BalanceView();\n","import View from '../View';\nclass DebtsView extends View {\n  _parentElement = document.querySelector('.debt__infos');\n\n  _generateMarkup() {\n    const internationalNumberFormat = new Intl.NumberFormat('en-US');\n    if (this._data) {\n      return this._data\n        .map(\n          debt => `\n      <div class=\"debt__info\">\n        <span><strong>${debt.debtor}</strong></span>\n        需支付給\n        <span><strong>${\n          debt.creditor\n        }</strong></span>${internationalNumberFormat.format(\n            Number(Math.round(debt.payment))\n          )}元\n      </div>`\n        )\n        .join('');\n    } else {\n      return `<div class=\"debt__info\">尚無應收/應付帳款</div>`;\n    }\n  }\n}\n\nexport default new DebtsView();\n","'use strict';\n\nimport * as model from './model';\nimport groupsView from './views/groupsView.js';\nimport payerView from './views/usersView/payerView.js';\nimport sharerView from './views/usersView/sharerView.js';\nimport userMngtView from './views/usersView/userMngtView.js';\nimport eventsView from './views/eventsView/eventsView.js';\nimport eventsHeaderView from './views/eventsView/eventsHeaderView.js';\nimport balanceView from './views/balanceView.js';\nimport debtsView from './views/usersView/debtsView';\n\nconst controlRenderAll = function () {\n  groupsView.render(model.state.groupObject);\n  payerView.render(model.state.activeGroup[0].users);\n  sharerView.render(model.state.activeGroup[0].users);\n  userMngtView.render(model.state.activeGroup[0].users);\n  controlRenderEvents();\n  groupsView._generateActiveGroup(model.state.activeGroup[0].id);\n};\n\n// Groups\nconst controlRenderGroups = function () {\n  groupsView.render(model.state.groupObject);\n};\n\nconst controlActiveGroup = function (id = undefined) {\n  if (!id) {\n    return model.state.activeGroup[0].id;\n  }\n\n  model.setActiveGroup(model.state.groupObject.find(group => group.id === id));\n  controlRenderAll();\n  return id;\n};\n\nconst controlCreateNewGroup = function () {\n  const newGroupName = document.querySelector('.newGroupName').value;\n  model.createNewGroup(newGroupName);\n\n  controlRenderAll();\n  groupsView._generateActiveGroup(model.state.activeGroup[0].id);\n};\n\nconst controlDeleteGroup = function (id) {\n  if (model.state.groupObject.length === 1) {\n    alert('請先新增群組，再刪除此群組');\n    return;\n  }\n\n  model.deleteGroup(id);\n  controlRenderAll();\n};\n\nconst controlReviseGroup = function (id, newGroupName) {\n  if (\n    !model.state.groupObject.some(group => group.groupName === newGroupName)\n  ) {\n    model.reviesGroupInfo(id, newGroupName);\n    model.setActiveGroup();\n    controlRenderAll();\n  } else {\n    model.setActiveGroup();\n    controlRenderAll();\n    return true;\n  }\n};\n\n//Users\nconst controlRenderPayers = function () {\n  payerView.render(model.state.activeGroup[0].users);\n};\n\nconst controlRenderSharers = function () {\n  sharerView.render(model.state.activeGroup[0].users);\n};\n\nconst controlRenderUserMngts = function () {\n  userMngtView.render(model.state.activeGroup[0].users);\n};\n\nconst controlCreateNewUser = function (newUserName) {\n  // model.createNewUser(newUserName);\n  model.updateUsersBalance();\n  model.isAllMember();\n  controlRenderAll();\n};\n\nconst controlDeleteUser = function (id) {\n  model.deleteUser(id);\n  model.updateUsersBalance();\n  model.isAllMember();\n  controlRenderAll();\n};\n\n//Events\nconst controlRenderEvents = function () {\n  document.querySelector('.event-list').innerHTML = '';\n  model.state.eventDateList = [];\n  model.state.activeGroup[0].events.map(event => {\n    if (model.createEventDateHeader(event)) {\n      eventsHeaderView.render(event, false);\n    }\n    eventsView._parentElement = document.querySelector(`.Date${event.date}`);\n    eventsView.render(event, false);\n  });\n  eventsView._parentElement = document.querySelector('.event-list');\n  balanceView.render(model.state.activeGroup[0].users);\n  debtsView.render(model.debtRelationship());\n};\n\nconst controlRenderCreateNewEvents = function () {\n  model.createNewEvent();\n  controlRenderEvents();\n};\n\nconst controlDeleteEvent = function (id) {\n  model.deleteEvent(id);\n  controlRenderEvents();\n};\n\nconst controlDeleteAllLocalStorage = function () {\n  model.deleteAllLocalStorage();\n};\n\nconst controlReviseUserMngt = function (id, newUserName) {\n  if (\n    model.state.activeGroup[0].users\n      .map(user => user.userName === newUserName)\n      .includes(true)\n  ) {\n    alert('已有相同使用者，請重新輸入');\n    return;\n  }\n\n  model.reviesUserInfo(id, newUserName);\n  model.setActiveGroup();\n  controlRenderAll();\n};\nconst init = function () {\n  // Render\n  groupsView._addHandlerRender(controlRenderGroups);\n  groupsView._addHandlerAddActive(controlActiveGroup);\n  payerView._addHandlerRender(controlRenderPayers);\n  sharerView._addHandlerRender(controlRenderSharers);\n  userMngtView._addHandlerRender(controlRenderUserMngts);\n  eventsView._addHandlerRender(controlRenderEvents);\n  sharerView._addHandlerMarkSharer();\n\n  // Create\n  groupsView._addHandlerNewGroup(controlCreateNewGroup);\n  eventsView._addHandlerNewEvent(controlRenderCreateNewEvents);\n  userMngtView._addHandlerNewUser(controlCreateNewUser);\n\n  // Delete\n  eventsView._addHandlerDeleteEvent(controlDeleteEvent);\n  groupsView._addHandlerDeleteGroup(controlDeleteGroup);\n  userMngtView._addHandlerDeleteUser(controlDeleteUser);\n\n  // Revise\n  groupsView._addHandlerReviseGroup(controlReviseGroup);\n  userMngtView._addHandlerReviseUser(controlReviseUserMngt);\n\n  // ToggleVisible\n  groupsView._addHandlerToggleSidebar();\n  groupsView._addHandlerToggleCreateWindow();\n  balanceView._addHandlerToggleSidebar();\n  userMngtView._addHandlerToggleWindow();\n  userMngtView._addHandlerToggleNewUserWindow();\n  sharerView._addHandlerSelectAll();\n  eventsView._addHandlerScrolltoEventTop();\n\n  // Local Storage\n  groupsView._addHandlerDeleteAllGroups(controlDeleteAllLocalStorage);\n};\ninit();\n"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$8a418f4c2848ae4e$export$eb2fcfdbd7ba97d4","groupName","users","events","this","_getRomdomId","Math","random","toString","substr","$8a418f4c2848ae4e$export$1f44aaf2ec115b54","userName","assets","debts","group2","group","balance","$8a418f4c2848ae4e$export$d61e24a684f9e51","spend1","date1","type1","productName1","note1","payer1","payerId1","sharer1","sharerId","group1","groupId","isAllMember","spend","date","type","productName","note","payer","payerId","sharer","$8a418f4c2848ae4e$export$ca000e230c0caa3e","activeGroup","groupObject","eventDateList","$8a418f4c2848ae4e$export$8197413158a6a707","async","newGroupName","newGroup","$8a418f4c2848ae4e$export$ff4321ec4dc5a5f4","$8a418f4c2848ae4e$var$createDefaultUserObject","push","$8a418f4c2848ae4e$export$89f713d771a1016d","$8a418f4c2848ae4e$export$e05e3b2ea8255400","group3","find","index","indexOf","splice","activeGroupIndex","map","user","$8a418f4c2848ae4e$var$createNewEventObject","document","querySelector","value","Number","isFinite","alert","newEvent","findIndex","payer2","sharer2","filter","toFixed","$8a418f4c2848ae4e$var$updateUsersAmont","$8a418f4c2848ae4e$export$eda932aaf60626df","deletedEvent","event","$8a418f4c2848ae4e$var$checkSharerList","querySelectorAll","forEach","el","classList","at","$8a418f4c2848ae4e$export$659df4d2a26c0a0f","sort","a","b","Date","newUser","$8a418f4c2848ae4e$export$b1a276f0b3fb2ada","$8a418f4c2848ae4e$var$persistLocalData","$8a418f4c2848ae4e$var$getLocalData","localStorage","setItem","stringify","groupsData","getItem","activeGroupData","vh","window","innerHeight","documentElement","style","setProperty","console","log","$8a418f4c2848ae4e$var$getDeviceHeight","now","todayDate","getFullYear","getMonth","padStart","getDate","setAttribute","$8a418f4c2848ae4e$var$setDefaultDate","render","data","clear","_data","markup","_generateMarkup","_clear","_parentElement","insertAdjacentHTML","innerHTML","renderError","message","_errorMessage","icons","$f29cd6c67ea13581$export$bdfd709ae4826697","$f29cd6c67ea13581$var$bundleURL","$f29cd6c67ea13581$var$getBaseURL","url","replace","err","matches","stack","match","$f29cd6c67ea13581$var$getBundleURL","$17bb6381a11ff084$exports","getBundleURL","resolve","$28e402b465a245a3$exports","$a817540b6c0a0605$export$2e2bcd8739ae039","_group","_addHandlerRender","handler5","addEventListener","e","target","closest","contains","_addHandlerAddActive","handler1","_generateActiveGroup","_addHandlerNewGroup","handler2","newGroupForm","preventDefault","add","_addHandlerReviseGroup","handler3","e1","parentNode","children","_groupsSetDefault","_groupsSetInputField","key","dataset","name","removeAttribute","_addHandlerDeleteGroup","handler4","_addHandlerToggleSidebar","toggleGroupVisible","getElementById","eventGroupBtn","groupCloseBtn","groupArea","groupList","checked","_addHandlerToggleCreateWindow","createBtn","toggle","focus","_addHandlerDeleteAllGroups","handler","confirm","location","reload","remove","charAt","$3eec0fa4852a206a$export$2e2bcd8739ae039","join","_addHandlerMarkSharer","previousElementSibling","_addHandlerSelectAll","selectedAllCheckbox","allCheckboxes","checkbox","nextElementSibling","_addHandlerNewUser","newUserName","allUserInfos","newUserForm","newUserNameInput","newUserId","scrollIntoView","block","inline","behavior","_addHandlerDeleteUser","parentElement","_addHandlerToggleWindow","eventUserMngtBtn","userMngtWindow","userMngtCloseBtn","userInfoButtons","_usersSetDefault","_addHandlerToggleNewUserWindow","createNewUserBtn","_addHandlerReviseUser","allUserNames","_usersSetInputField","_addHandlerNewEvent","_addHandlerDeleteEvent","_addHandlerScrolltoEventTop","internationalNumberFormat","Intl","NumberFormat","_addHandlerNewEventHeader","balanceSidebar","eventBalanceBtn","balanceCloseBtn","balanceArea","round","format","debt","debtor","$e59237c46c570137$var$controlRenderAll","$f071d99d844d6af8$export$2e2bcd8739ae039","$c146343140b5ba58$export$2e2bcd8739ae039","$0c930005e1755596$export$2e2bcd8739ae039","$e59237c46c570137$var$controlRenderEvents","$e59237c46c570137$var$controlRenderGroups","$e59237c46c570137$var$controlActiveGroup","$e59237c46c570137$var$controlCreateNewGroup","$e59237c46c570137$var$controlDeleteGroup","$8a418f4c2848ae4e$export$ae2679b329fc10b6","$e59237c46c570137$var$controlReviseGroup","some","$8a418f4c2848ae4e$export$f5a1daffd15b3abb","$e59237c46c570137$var$controlRenderPayers","$e59237c46c570137$var$controlRenderSharers","$e59237c46c570137$var$controlRenderUserMngts","$e59237c46c570137$var$controlCreateNewUser","$e59237c46c570137$var$controlDeleteUser","obj","$8a418f4c2848ae4e$export$7d0f10f273c0438a","Set","has","$8a418f4c2848ae4e$export$82f50adc1d0b1364","$eb6fac755dcba4ed$export$2e2bcd8739ae039","$2d81a2112294bca1$export$2e2bcd8739ae039","$acf9b93336633142$export$2e2bcd8739ae039","$3a4f66fa7bee2b96$export$2e2bcd8739ae039","debtRelation","renderArr","creditor","creditorPayment","debtorPayment","abs","payment","$8a418f4c2848ae4e$export$f4ea5a003fff46dd","$e59237c46c570137$var$controlRenderCreateNewEvents","$e59237c46c570137$var$controlDeleteEvent","$8a418f4c2848ae4e$export$95711ec6c6227e9a","$e59237c46c570137$var$controlDeleteAllLocalStorage","$e59237c46c570137$var$controlReviseUserMngt","includes","groupIndex","$8a418f4c2848ae4e$export$4fcd6ef2e79fd2e5"],"version":3,"file":"index.1417488b.js.map"}