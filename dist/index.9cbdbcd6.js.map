{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-b17e65fdb2a30e64.js","src/js/model.js","src/js/views/View.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-ff926815674bc302.js","node_modules/@parcel/runtime-js/lib/runtime-a3f140c599eac2d2.js","src/js/views/groupsView.js","src/js/views/usersView/payerView.js","src/js/views/usersView/sharerView.js","src/js/views/usersView/userMngtView.js","src/js/views/eventsView/eventsView.js","src/js/views/eventsView/eventsHeaderView.js","src/js/views/balanceView.js","src/js/views/usersView/debtsView.js","src/js/controller.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2G0cO\\\":\\\"index.9cbdbcd6.js\\\",\\\"41LG6\\\":\\\"revise.809c8e4f.png\\\",\\\"5k0fD\\\":\\\"delete.014e6afe.png\\\"}\"));","//  Group Instance\nexport class Group {\n  constructor(groupName, users, events) {\n    this.id = this._getRomdomId();\n    this.groupName = groupName;\n    this.users = users;\n    this.events = events;\n  }\n  _getRomdomId() {\n    return 'G_' + Math.random().toString(36).substr(2, 9);\n  }\n}\n\n//  User Instance\nexport class User {\n  constructor(userName, assets, debts, group) {\n    this.id = this._getRomdomId();\n    this.userName = userName;\n    this.assets = assets;\n    this.debts = debts;\n    this.group = group;\n    this.balance = this.assets - this.debts;\n  }\n  _getRomdomId() {\n    return 'U_' + Math.random().toString(36).substr(2, 9);\n  }\n}\n\n//  Event Instance\nexport class Event {\n  // prettier-ignore\n  constructor(spend, date, type, productName, note, payer, payerId, sharer, sharerId, group, groupId, isAllMember) {\n    this.id = this._getRomdomId();\n    this.spend = spend;\n    this.date = date;\n    this.type = type;\n    this.productName = productName;\n    this.note = note;\n    this.payer = payer;\n    this.payerId = payerId;\n    this.sharer = sharer;\n    this.sharerId = sharerId;\n    this.group = group;\n    this.groupId = groupId;\n    this.isAllMember = isAllMember;\n  }\n\n  _getRomdomId() {\n    return 'E_' + Math.random().toString(36).substr(2, 9);\n  }\n}\n\nexport const state = {\n  activeGroup: [],\n  groupObject: [],\n  sharerId: [],\n  sharer: [],\n  eventDateList: [],\n};\n\n//------------------------GROUP------------------------\n\nexport const createNewGroup = async function (newGroupName) {\n  const newGroup = new Group(newGroupName, [], []);\n\n  // 將新群組設定成active\n  setActiveGroup(newGroup);\n  // 建立預設使用者\n  createDefaultUserObject(newGroup);\n  state.groupObject.push(newGroup);\n  // 更新新使用者的balance\n  updateUsersBalance();\n  storeLocalStorage();\n};\n\nexport const deleteGroup = function (id) {\n  const target = state.groupObject.find(group => group.id === id);\n  const index = state.groupObject.indexOf(target);\n  // 刪除特定群組\n  state.groupObject.splice(index, 1);\n  // 更新active群組\n  state.activeGroup.splice(0, 1);\n  state.activeGroup.push(state.groupObject[index - 1 > 0 ? index - 1 : 0]);\n  storeLocalStorage();\n};\n\nexport const setActiveGroup = async function (group = undefined) {\n  // 若group參數無值，則active群組依舊為目前的active群組\n  if (!group) {\n    const activeGroup = state.groupObject.find(\n      group => group.id === state.activeGroup[0].id\n    );\n    const index = state.groupObject.indexOf(activeGroup);\n    group = state.groupObject[index];\n  }\n\n  // 若group參數有值，設定新的active群組\n  state.activeGroup.splice(0, 1);\n  state.activeGroup.push(group);\n  storeLocalStorage();\n};\n\n//------------------------USER------------------------\n\nexport const createNewUser = function (newUserName) {\n  if (newUserName.value === '') {\n    alert('名稱不可為空');\n    return;\n  }\n\n  // 建立New User Instance\n  createNewUserObject(newUserName);\n  storeLocalStorage();\n  newUserName.value = '';\n};\n\nconst createNewUserObject = function (newUserName) {\n  if (\n    state.activeGroup[0].users\n      .map(user => user.userName === newUserName)\n      .includes(true)\n  ) {\n    alert('已有相同名稱，請重新命名');\n    return;\n  }\n\n  // 建立New User Instance\n  const newUser = new User(newUserName, 0, 0, state.activeGroup[0].groupName);\n  const index = state.groupObject.findIndex(\n    group => group.id === state.activeGroup[0].id\n  );\n\n  state.groupObject[index].users.push(newUser);\n  setActiveGroup(state.groupObject[index]);\n  storeLocalStorage();\n};\n\nexport const deleteUser = function (id) {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n  const obj = state.activeGroup[0].users.find(user => user.id === id);\n  const index = state.activeGroup[0].users.indexOf(obj);\n\n  if (index === 0) {\n    alert('無法刪除自己');\n    return;\n  } else if (obj.balance !== 0) {\n    alert('帳款尚未平衡');\n    return;\n  } else {\n    state.groupObject[activeGroupIndex].users.splice(index, 1);\n    setActiveGroup(state.groupObject[activeGroupIndex]);\n  }\n  storeLocalStorage();\n};\n\nconst updateUsersAmont = function (newEvent) {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  //更新使用者應收額\n  const payer = state.groupObject[activeGroupIndex].users.find(\n    payer => payer.id === `${newEvent.payerId}`\n  );\n  payer.assets = Number(payer.assets) + Number(newEvent.spend);\n\n  //更新使用者應付額\n  for (const i of newEvent.sharer) {\n    const [sharer] = state.groupObject[activeGroupIndex].users.filter(\n      sharer => sharer.id === `${newEvent.sharerId[newEvent.sharer.indexOf(i)]}`\n    );\n\n    if (!sharer) return;\n\n    sharer.debts = Number(\n      Number(sharer.debts) +\n        Number((newEvent.spend / state.sharer.length).toFixed(2))\n    ).toFixed(2);\n  }\n\n  updateUsersBalance();\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n};\n\nexport const updateUsersBalance = function () {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  //更新active群組中的user balance\n  if (!state.groupObject[activeGroupIndex]) return;\n\n  state.groupObject[activeGroupIndex].users.map(\n    user => (user.balance = user.assets - user.debts)\n  );\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n};\n\nexport const reviesUserInfo = function (id, newUserName) {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const groupIndex = state.groupObject.indexOf(activeGroup);\n  const target = state.groupObject[groupIndex].users.find(\n    user => user.id === id\n  );\n\n  target.userName = newUserName;\n};\nexport const reviesGroupInfo = function (id, newGroupName) {\n  const target = state.groupObject.find(group => group.id === id);\n\n  target.groupName = newGroupName;\n};\n\n//------------------------EVENT------------------------\n\nexport const createNewEvent = function () {\n  // 確認使用者為分款者的名單\n  checkSharerList();\n  if (state.sharerId.length === 0) {\n    alert('分款者為必填');\n    return;\n  }\n  // 建立new Event Instance\n  createNewEventObject();\n  // 透過時間排序事件\n  sortEventsOrder();\n  storeLocalStorage();\n\n  state.sharerId = [];\n  state.sharer = [];\n};\n\nconst createNewEventObject = function () {\n  const spend = document.querySelector('.event-form__input--spend');\n  const date = document.querySelector('.event-form__input--date');\n  const type = document.querySelector('.event-form__input--type');\n  const productName = document.querySelector('.event-form__input--name');\n  const note = document.querySelector('.event-form__input--note');\n  const payerId = document.querySelector('.event-form__input--payer');\n  const payer = state.activeGroup[0].users.find(\n    user => user.id === payerId.value\n  );\n\n  if (\n    !Number.isFinite(+spend.value) ||\n    Number(spend.value) < 0 ||\n    Number(spend.value) % 1 !== 0\n  ) {\n    alert('請輸入正整數');\n    state.sharerId = [];\n    state.sharer = [];\n    return;\n  }\n\n  // 建立new Event Instance\n  const newEvent = new Event(\n    spend.value,\n    date.value,\n    type.value,\n    productName.value,\n    note.value,\n    payer.userName,\n    payerId.value,\n    state.sharer,\n    state.sharerId,\n    state.activeGroup[0].groupName,\n    state.activeGroup[0].id,\n    state.sharerId.length === state.activeGroup[0].users.length ? true : false\n  );\n\n  const index = state.groupObject.findIndex(\n    group => group.id === state.activeGroup[0].id\n  );\n\n  state.groupObject[index].events.push(newEvent);\n  setActiveGroup(state.groupObject[index]);\n  updateUsersAmont(newEvent);\n  storeLocalStorage();\n};\n\nexport const deleteEvent = function (id) {\n  // 刪除特定event\n  const obj = state.activeGroup[0].events.find(event => event.id === id);\n  const index = state.activeGroup[0].events.indexOf(obj);\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  updateDeleteEventAmont(id);\n  state.groupObject[activeGroupIndex].events.splice(index, 1);\n  sortEventsOrder();\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n  storeLocalStorage();\n};\n\nexport const updateDeleteEventAmont = function (id) {\n  // 更新被刪除event中使用者數值\n\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  const deletedEvent = state.groupObject[activeGroupIndex].events.find(\n    event => event.id === id\n  );\n\n  //更新收款者的值;\n  const payer = state.groupObject[activeGroupIndex].users.find(\n    user => user.id === deletedEvent.payerId\n  );\n\n  payer.assets = Number(payer.assets) - Number(deletedEvent.spend);\n\n  //更新分款者的值;\n  for (const i of deletedEvent.sharer) {\n    const [sharer] = state.groupObject[activeGroupIndex].users.filter(\n      user =>\n        user.id === `${deletedEvent.sharerId[deletedEvent.sharer.indexOf(i)]}`\n    );\n\n    if (!sharer) return;\n\n    sharer.debts = Number(\n      Number(sharer.debts) -\n        Number((deletedEvent.spend / deletedEvent.sharer.length).toFixed(2))\n    ).toFixed(2);\n  }\n  // 更新使用者balance值\n  updateUsersBalance();\n};\n\nexport const createEventDateHeader = function (event) {\n  // 建立日期標誌\n  const dateSet = new Set(state.eventDateList);\n  if (dateSet.has(event.date)) return false;\n  state.eventDateList.push(event.date);\n  storeLocalStorage();\n  return true;\n};\n\nconst checkSharerList = function () {\n  // 確認使用者中誰為分款者\n  document.querySelectorAll('input[type=checkbox]:checked').forEach(el => {\n    state.sharerId.push(el.classList[1]);\n    state.sharer.push(el.value);\n    if (state.sharer.at(-1) === 'selectedAll') {\n      state.sharer.splice(-1, 1);\n      state.sharerId.splice(-1, 1);\n    }\n  });\n};\n\nexport const sortEventsOrder = function () {\n  //透過日期排序Event順序\n  state.activeGroup[0].events = state.activeGroup[0].events\n    .map(event => event)\n    .sort((a, b) => new Date(a.date) - new Date(b.date));\n};\n\n//------------------------DEBT RELATIONSHIP------------------------\n\nexport const debtRelationship = function () {\n  const debtRelation = [];\n  const renderArr = [];\n  if (!state.activeGroup[0]) return;\n\n  //在DebtRelation Array中push所有user的userName與balance\n  state.activeGroup[0].users.map(obj => {\n    debtRelation.push([`${obj.userName}`, `${obj.balance}`]);\n  });\n\n  //將DebtRelation內元素由大至小排序\n  debtRelation.sort((a, b) => b[1] - a[1]);\n\n  //宣告所需變數\n  let creditor = debtRelation[0][0];\n  let debtor = debtRelation[debtRelation.length - 1][0];\n  let creditorPayment = +debtRelation[0][1];\n  let debtorPayment = +debtRelation[debtRelation.length - 1][1];\n\n  //若DebtRelation內只有預設使用者，或是尚無應收應付帳款，則顯示尚無應收/應付帳款\n  if (\n    debtRelation.length === 1 ||\n    (creditorPayment === 0 && debtorPayment === 0)\n  )\n    return false;\n  else {\n    //若有應收/應付帳款時，執行此迴圈\n    while (creditorPayment > 0 && debtorPayment < 0) {\n      if (creditorPayment > debtorPayment) {\n        //更新debtRelation帳款\n        if (Math.abs(creditorPayment) > Math.abs(debtorPayment)) {\n          debtRelation[0][1] = creditorPayment + debtorPayment;\n          debtRelation[debtRelation.length - 1][1] =\n            debtorPayment - debtorPayment;\n\n          renderArr.push({ creditor, debtor, payment: -debtorPayment });\n        } else if (\n          Math.abs(creditorPayment) < Math.abs(debtorPayment) ||\n          (Math.abs(creditorPayment) === Math.abs(debtorPayment) &&\n            creditorPayment !== 0)\n        ) {\n          debtRelation[0][1] = creditorPayment - creditorPayment;\n          debtRelation[debtRelation.length - 1][1] =\n            debtorPayment + creditorPayment;\n          renderArr.push({ creditor, debtor, payment: creditorPayment });\n        } else {\n          return;\n        }\n\n        //重新排序debtRelation\n        debtRelation.sort((a, b) => b[1] - a[1]);\n\n        //重新宣告變數\n        creditor = debtRelation[0][0];\n        debtor = debtRelation[debtRelation.length - 1][0];\n        creditorPayment = Number(debtRelation[0][1]);\n        debtorPayment = Number(debtRelation[debtRelation.length - 1][1]);\n      }\n    }\n    return renderArr;\n  }\n};\n\n//------------------------INIT------------------------\n\nconst getDeviceHeight = () => {\n  let vh = window.innerHeight * 0.01;\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\n  // console.log(`執行成功，目前高度為${vh * 100}px`);\n  console.log('hey');\n};\n\nconst createDefaultUserObject = function (group) {\n  // prettier-ignore\n  if (group.users.length === 0) {\n    newUser = new User('自己', 0, 0, state.activeGroup[0].groupName);\n    group.users.push(newUser);\n    setActiveGroup(group)\n  } else return;\n};\n\nexport const isAllMember = () => {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  state.groupObject[activeGroupIndex].events.map(event => {\n    event.isAllMember =\n      event.sharerId.length === state.groupObject[activeGroupIndex].users.length\n        ? true\n        : false;\n  });\n\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n  storeLocalStorage();\n};\n\nconst createDefaultGroupObject = function () {\n  if (state.groupObject.length === 0) {\n    createNewGroup('預設群組');\n  }\n};\n\nconst setDefaultDate = function () {\n  const now = new Date();\n  const year = now.getFullYear();\n  const month = `${now.getMonth() + 1}`.padStart(2, 0);\n  const dates = `${now.getDate()}`.padStart(2, 0);\n  const todayDate = `${year}-${month}-${dates}`;\n  const dateInput = document.querySelector('.event-form__input--date');\n  dateInput.setAttribute('value', todayDate);\n};\n\n//------------------------LOCAL STORAGE------------------------\n\nexport const storeLocalStorage = function () {\n  persistLocalData();\n  getLocalData();\n};\n\nconst persistLocalData = function () {\n  localStorage.setItem('groups', JSON.stringify(state.groupObject));\n  localStorage.setItem('activeGroup', JSON.stringify(state.activeGroup));\n};\n\nconst getLocalData = function () {\n  const groupsData = JSON.parse(localStorage.getItem('groups'));\n  const activeGroupData = JSON.parse(localStorage.getItem('activeGroup'));\n  if (!activeGroupData || !groupsData) return;\n  state.groupObject = groupsData;\n  state.activeGroup[0] = activeGroupData[0];\n};\n\nexport const deleteAllLocalStorage = () => {\n  localStorage.clear();\n};\n\nconst init = function () {\n  // console.log('hey');\n  getDeviceHeight();\n  // console.log('test');\n  getLocalData();\n  createDefaultGroupObject();\n  setDefaultDate();\n  updateUsersBalance();\n  persistLocalData();\n};\n\ninit();\n","export default class View {\n  render(data, clear = true) {\n    this._data = data;\n\n    const markup = this._generateMarkup();\n    if (clear) {\n      this._clear();\n    }\n\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\n  }\n\n  _clear() {\n    this._parentElement.innerHTML = '';\n  }\n\n  renderError(message = this._errorMessage) {\n    const markup = `\n      <div class=\"error\">\n        <div>\n          <svg>\n            <use href=\"${icons}#icon-alert-triangle\"></use>\n          </svg>\n        </div>\n        <p>${message}</p>\n      </div>\n    `;\n    this._clear();\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\n  }\n\n  renderMessage(message = this._message) {\n    const markup = `\n      <div class=\"message\">\n        <div>\n          <svg>\n            <use href=\"${icons}#icon-smile\"></use>\n          </svg>\n        </div>\n        <p>${message}</p>\n      </div>\n    `;\n    this._clear();\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\n  }\n}\n","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('2G0cO') + require('./helpers/bundle-manifest').resolve(\"41LG6\");","module.exports = require('./helpers/bundle-url').getBundleURL('2G0cO') + require('./helpers/bundle-manifest').resolve(\"5k0fD\");","import View from './View.js';\nimport imgRevise from 'url:../../img/revise.png';\nimport imgDelete from 'url:../../img/delete.png';\n\nclass GroupsView extends View {\n  _parentElement = document.querySelector('.group-list');\n  _group = document.querySelector('.group');\n  // render all groups\n  _addHandlerRender(handler) {\n    window.addEventListener('load', handler);\n    this._group.addEventListener('click', e => {\n      if (\n        !e.target.closest('.group') ||\n        e.target.classList.contains('group__item--revise') ||\n        e.target.classList.contains('group__item--delete')\n      )\n        return;\n      handler();\n    });\n  }\n\n  _addHandlerAddActive(handler) {\n    window.addEventListener('load', () => {\n      this._generateActiveGroup(handler());\n    });\n\n    this._group.addEventListener('click', e => {\n      if (e.target.classList.contains('group__item--delete')) {\n        return;\n      }\n\n      if (!e.target.closest('.group-list__info')) {\n        this._generateActiveGroup(handler());\n        return;\n      }\n\n      const target = e.target.closest('.group-list__info').classList[1];\n      this._generateActiveGroup(handler(target));\n    });\n  }\n\n  _addHandlerNewGroup(handler) {\n    const newGroupForm = document.querySelector('.group-create__form');\n    const newGroupName = document.querySelector('.newGroupName');\n\n    newGroupForm.addEventListener('submit', e => {\n      e.preventDefault();\n      handler();\n      newGroupName.value = '';\n      newGroupForm.classList.add('hidden');\n    });\n  }\n\n  _addHandlerReviseGroup(handler) {\n    this._parentElement.addEventListener('click', e => {\n      if (!e.target.classList.contains('group__item--revise')) return;\n\n      const target = e.target.parentNode.parentNode.classList[1];\n      const newGroupName = e.target.parentNode.children[1];\n\n      this._groupsSetDefault();\n      this._groupsSetInputField(newGroupName);\n\n      newGroupName.addEventListener('keypress', e => {\n        if (e.key !== 'Enter') return;\n\n        if (newGroupName.value === '') {\n          newGroupName.setAttribute('value', newGroupName.dataset.name);\n        }\n\n        if (newGroupName.value !== '') {\n          if (handler(target, newGroupName.value)) {\n            alert('已有相同群組，請重新命名');\n            newGroupName.value = '';\n            return;\n          }\n\n          e.preventDefault();\n          newGroupName.setAttribute('value', newGroupName.value);\n          handler(target, newGroupName.value);\n        }\n        newGroupName.setAttribute('readonly', '');\n        newGroupName.removeAttribute('placeholder');\n      });\n    });\n  }\n\n  _addHandlerDeleteGroup(handler) {\n    this._parentElement.addEventListener('click', function (e) {\n      if (!e.target.closest('.group__item--delete')) return;\n      const target = e.target.closest('.group-list__info').classList[1];\n      handler(target);\n    });\n  }\n\n  _addHandlerToggleSidebar() {\n    window.addEventListener('click', e => {\n      const toggleGroupVisible = document.getElementById('toggleGroupArea');\n      const eventGroupBtn = e.target.classList.contains('event__btn--groups');\n      const groupCloseBtn = e.target.classList.contains('group__btn--close');\n      const groupArea = e.target.closest('.group');\n      const groupList = e.target.closest('.group-list__info');\n\n      if (\n        eventGroupBtn ||\n        groupCloseBtn ||\n        (toggleGroupVisible.checked && !groupArea && !groupList)\n      ) {\n        this._groupsSetDefault();\n        toggleGroupVisible.checked = !toggleGroupVisible.checked;\n      }\n    });\n  }\n\n  _addHandlerToggleCreateWindow() {\n    const createBtn = document.querySelector('.group-create__btn');\n    const newGroupForm = document.querySelector('.group-create__form');\n    const newGroupName = document.querySelector('.newGroupName');\n    createBtn.addEventListener('click', function () {\n      newGroupForm.classList.toggle('hidden');\n      newGroupName.focus();\n    });\n  }\n\n  _groupsSetDefault = function () {\n    const allGroupNames = document.querySelectorAll(\n      '.group-list__info .group__item--headline'\n    );\n\n    allGroupNames.forEach(users => {\n      users.setAttribute('readonly', '');\n      users.removeAttribute('placeholder');\n      users.value = users.dataset.name;\n    });\n  };\n\n  _groupsSetInputField = function (newGroupName) {\n    newGroupName.removeAttribute('readonly');\n    newGroupName.value = '';\n    newGroupName.setAttribute('placeholder', '新群組名');\n    newGroupName.focus();\n  };\n\n  _addHandlerDeleteAllGroups = function (handler) {\n    window.addEventListener('click', e => {\n      if (!e.target.classList.contains('event__btn--deleteAllInfo')) return;\n\n      const firstCheck = confirm(\n        '您確定要刪除所有資料嗎？將會刪除所有的群組、使用者及記錄。'\n      );\n\n      if (firstCheck) {\n        const secondCheck = confirm('您確定嗎？');\n        if (secondCheck) {\n          handler();\n          alert('所有資料已被刪除！');\n          location.reload();\n        } else return;\n      } else return;\n    });\n  };\n\n  _generateActiveGroup(id) {\n    const allGroup = document.querySelectorAll('.group-list__info');\n    allGroup.forEach(group => {\n      group.classList.remove('active');\n    });\n\n    if (!document.querySelector(`.${id}`)) {\n      return;\n    }\n\n    document.querySelector(`.${id}`).classList.add('active');\n  }\n\n  _generateMarkup() {\n    return this._data\n      .map(\n        group => `\n      <div class=\"group-list__info ${group.id}\">\n        <div class=\"group__items\">\n          <div class=\"group__item--icon\">\n            <span>${group.groupName.charAt(0)}</span>\n          </div>\n          <input\n            class=\"group__item--headline\"\n            autocomplete=\"off\"\n            readonly\n            required\n            maxlength=\"5\"\n            placeholder=\"\"\n            value=\"${group.groupName}\"\n            data-name=\"${group.groupName}\"\n          />\n          <div class=\"group__item--subhead\">\n            ${group.users.length}位成員\n          </div>\n          <img class=\"group__item--revise\" src=\"${imgRevise}\"></img>\n          <img class=\"group__item--delete\" src=\"${imgDelete}\"></img>\n        </div>\n      </div>`\n      )\n      .reverse()\n      .join('');\n  }\n}\n\nexport default new GroupsView();\n","import View from '../View';\nclass PayerView extends View {\n  _parentElement = document.querySelector('.event-form__input--payer');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', () => {\n      handler();\n    });\n  }\n\n  _generateMarkup() {\n    return this._data\n      .map(user => `<option value=\"${user.id}\">${user.userName}</option>`)\n      .join('');\n  }\n}\n\nexport default new PayerView();\n","import View from '../View';\nclass SharerView extends View {\n  _parentElement = document.querySelector('.event-form__input--sharers');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', () => {\n      handler();\n    });\n  }\n\n  _addHandlerMarkSharer() {\n    this._parentElement.addEventListener('click', e => {\n      if (!e.target.classList.contains('event-form__input--sharer')) return;\n\n      if (!e.target.previousElementSibling.checked) {\n        e.target.classList.add('checked');\n      }\n      if (e.target.previousElementSibling.checked) {\n        e.target.classList.remove('checked');\n      }\n    });\n  }\n\n  _addHandlerSelectAll() {\n    window.addEventListener('click', e => {\n      if (!e.target.classList.contains('selectedAll')) return;\n      const selectedAllCheckbox = document.querySelector(\n        '.selectedAllCheckbox'\n      );\n      const allCheckboxes = document.querySelectorAll('.checkbox');\n\n      if (!selectedAllCheckbox.checked) {\n        allCheckboxes.forEach(checkbox => {\n          checkbox.checked = true;\n          checkbox.nextElementSibling.classList.add('checked');\n        });\n      }\n\n      if (selectedAllCheckbox.checked) {\n        allCheckboxes.forEach(checkbox => {\n          checkbox.checked = false;\n          checkbox.nextElementSibling.classList.remove('checked');\n        });\n        return;\n      }\n    });\n  }\n\n  _generateMarkup() {\n    return (\n      this._data\n        .map(\n          user => `\n        <input class=\"checkbox ${user.id}\" type=\"checkbox\" id=\"${user.id}\" value=\"${user.userName}\"/>\n        <label class=\"event-form__input--sharer\" for=\"${user.id}\">${user.userName}</label>\n        `\n        )\n        .join('') +\n      (this._data.length > 1\n        ? `\n        <input class=\"selectedAllCheckbox\" type=\"checkbox\" id=\"selectedAll\" value = \"selectedAll\">\n        <label class=\"event-form__input--sharer selectedAll\" for=\"selectedAll\">全選</label>\n        `\n        : '')\n    );\n    // : '';\n    // this._data.length >\n    // 1\n    // ? `\n    // <input class=\"checkbox selectedAll\" type=\"checkbox\" id=\"selectedAll\" value=\"全選\"/>\n    // <label class=\"event-form__input--sharer\" for=\"selectedAll\">全選</label>\n    //   `\n    // : '';\n  }\n}\n\nexport default new SharerView();\n","import View from '../View.js';\nimport imgRevise from 'url:../../../img/revise.png';\nimport imgDelete from 'url:../../../img/delete.png';\n\nclass UserMgntView extends View {\n  _parentElement = document.querySelector('.user__infos');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', handler);\n  }\n\n  _addHandlerNewUser(handler) {\n    const newUserName = document.querySelector(\n      '.user-form__input--newUserName'\n    );\n    const allUserInfos = document.querySelector('.user__infos');\n    const newUserForm = document.querySelector('.user-form');\n    const newUserNameInput = document.querySelector(\n      '.user-form__input--newUserName'\n    );\n\n    newUserForm.addEventListener('submit', e => {\n      e.preventDefault();\n      handler(newUserName.value);\n\n      const newUserId =\n        allUserInfos.children[allUserInfos.children.length - 1].id;\n\n      document.querySelector(`.user__info #${newUserId}`).scrollIntoView({\n        block: 'start',\n        inline: 'nearest',\n        behavior: 'smooth',\n      });\n\n      newUserNameInput.value = '';\n    });\n  }\n\n  _addHandlerDeleteUser(handler) {\n    document.querySelector('.userMngt').addEventListener('click', e => {\n      if (!e.target.classList.contains('user__info__btn--delete')) return;\n      const target = e.target.parentElement.parentElement.id;\n      handler(target);\n    });\n  }\n\n  _addHandlerToggleWindow() {\n    window.addEventListener('click', e => {\n      const eventUserMngtBtn = e.target.classList.contains(\n        'event__btn--usersMngt'\n      );\n      const userMngtWindow = document.querySelector('.userMngt');\n      const userMngtCloseBtn = e.target.classList.contains(\n        'userMngt__btn--close'\n      );\n      const userInfoButtons = e.target.closest('.user__info__btns');\n      const newUserForm = document.querySelector('.user-form');\n\n      // e.target.closest('.userMngt');\n      if (\n        eventUserMngtBtn ||\n        userMngtCloseBtn ||\n        (!userMngtWindow.classList.contains('hidden') &&\n          !e.target.closest('.userMngt') &&\n          !userInfoButtons)\n      ) {\n        userMngtWindow.classList.toggle('hidden');\n        this._usersSetDefault();\n        newUserForm.classList.add('hidden');\n      }\n    });\n  }\n\n  _addHandlerToggleNewUserWindow() {\n    const createNewUserBtn = document.querySelector(\n      '.userMngt-header__btn--createNewUser'\n    );\n    const newUserName = document.querySelector(\n      '.user-form__input--newUserName'\n    );\n\n    createNewUserBtn.addEventListener('click', function () {\n      const newUserForm = document.querySelector('.user-form');\n\n      newUserForm.classList.toggle('hidden');\n      newUserName.focus();\n    });\n  }\n\n  _addHandlerReviseUser(handler) {\n    this._parentElement.addEventListener('click', e => {\n      if (!e.target.classList.contains('user__info__btn--revise')) return;\n      const allUserNames = document.querySelectorAll('.user__info--name');\n      const target = e.target.parentNode.parentNode.id;\n      const userName = e.target.parentNode.parentNode.children[0];\n\n      this._usersSetDefault();\n      this._usersSetInputField(userName);\n\n      allUserNames.forEach(user =>\n        user.addEventListener('keypress', e => {\n          if (e.key === 'Enter') {\n            if (userName.value === '') {\n              userName.setAttribute('value', userName.dataset.name);\n            } else {\n              userName.setAttribute('value', userName.value);\n            }\n            userName.setAttribute('readonly', '');\n            userName.removeAttribute('placeholder');\n            handler(target, userName.value);\n          } else {\n            return;\n          }\n        })\n      );\n    });\n  }\n\n  _usersSetDefault = function () {\n    const allUserNames = document.querySelectorAll('.user__info--name');\n\n    allUserNames.forEach(user => {\n      user.setAttribute('readonly', '');\n      user.removeAttribute('placeholder');\n      user.value = user.dataset.name;\n    });\n  };\n\n  _usersSetInputField = function (userName) {\n    userName.setAttribute('data-name', userName.value);\n    userName.removeAttribute('readonly');\n    userName.removeAttribute('value');\n    userName.setAttribute('placeholder', '請輸入新名稱');\n    userName.value = '';\n    userName.focus();\n  };\n  // _userRevise(e) {\n  //   const userNames = document.querySelectorAll('.user__info--name');\n  //   if (!e.target.classList.contains('user__btn--revise')) return;\n\n  //   const obj = model.state.activeGroup[0].users.find(\n  //     obj => obj.id === e.target.parentNode.parentNode.id\n  //   );\n  //   const userName = e.target.parentNode.parentNode.children[0];\n\n  //   userNames.forEach(users => {\n  //     users.setAttribute('readonly', '');\n  //     users.removeAttribute('placeholder');\n  //     users.value = users.dataset.name;\n  //   });\n\n  //   userName.setAttribute('data-name', userName.value);\n  //   userName.removeAttribute('readonly');\n  //   userName.removeAttribute('value');\n  //   userName.setAttribute('placeholder', '請輸入新名稱');\n  //   userName.value = '';\n  //   userName.focus();\n\n  //   document.querySelector('.user__btn--OK').addEventListener(\n  //     'click',\n  //     () => {\n  //       if (\n  //         model.state.activeGroup[0].users\n  //           .map(user => user.userName === userName.value)\n  //           .includes(true)\n  //       ) {\n  //         alert('已有相同名稱，請重新輸入');\n  //         userName.value = '';\n\n  //         return;\n  //       }\n\n  //       if (userName.value === '') {\n  //         userName.setAttribute('value', userName.dataset.name);\n  //       } else {\n  //         userName.setAttribute('value', userName.value);\n  //         obj.userName = userName.value;\n  //       }\n  //       userName.setAttribute('readonly', '');\n  //       userName.removeAttribute('placeholder');\n  //       this._renderAll();\n  //       model.storeLocalStorage();\n  //     },\n  //     { once: true }\n  //   );\n\n  //   document\n  //     .querySelectorAll('.user__info--name')\n\n  //     .forEach(user =>\n  //       user.addEventListener('keypress', e => {\n  //         if (e.key === 'Enter') {\n  //           if (\n  //             model.state.activeGroup[0].users\n  //               .map(user => user.userName === userName.value)\n  //               .includes(true)\n  //           ) {\n  //             alert('已有相同名稱，請重新輸入');\n  //             userName.value = '';\n  //             return;\n  //           }\n\n  //           if (userName.value === '') {\n  //             userName.setAttribute('value', userName.dataset.name);\n  //           } else {\n  //             userName.setAttribute('value', userName.value);\n  //             obj.userName = userName.value;\n  //           }\n  //           userName.setAttribute('readonly', '');\n  //           userName.removeAttribute('placeholder');\n  //           this._renderAll();\n  //           model.storeLocalStorage();\n  //         } else {\n  //           return;\n  //         }\n  //       })\n  //     );\n  // }\n\n  _generateMarkup() {\n    return this._data\n      .map(\n        user => `\n        <div class=\"user__info\" id=${user.id}>\n          <input class=\"user__info--name\" id=${user.id} maxlength=\"5\" autocomplete=\"off\" readonly value=\"${user.userName}\" data-name=\"${user.userName}\">\n\n          <div class=\"user__info__btns\">\n            <img class=\"user__info__btn--revise\"src=\"${imgRevise}\"></img>\n            <img class=\"user__info__btn--delete\"src=\"${imgDelete}\"></img>\n          </div>\n      </div>`\n      )\n      .join('');\n  }\n}\n\nexport default new UserMgntView();\n","import View from '../View';\n\nclass EventsView extends View {\n  _parentElement = document.querySelector('.event-list');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', handler);\n  }\n  _addHandlerNewEvent(handler) {\n    const eventForm = document.querySelector('.event-form');\n    eventForm.addEventListener('submit', function (e) {\n      e.preventDefault();\n      handler();\n    });\n  }\n\n  _addHandlerDeleteEvent(handler) {\n    this._parentElement.addEventListener('click', function (e) {\n      const target = e.target.id;\n      if (!e.target.classList.contains('event__info__btn--delete')) return;\n      handler(target);\n    });\n  }\n\n  _addHandlerScrolltoEventTop() {\n    window.addEventListener('click', function (e) {\n      if (!e.target.classList.contains('event__btn--gotoTop')) return;\n\n      document.querySelector('.event__content')?.scrollIntoView({\n        block: 'start',\n        inline: 'nearest',\n        behavior: 'smooth',\n      });\n    });\n  }\n\n  _generateMarkup() {\n    const internationalNumberFormat = new Intl.NumberFormat('en-US');\n\n    return ` \n      <div class=\"event__info\">\n        <div class=\"event__info__btn--delete\" id=${this._data.id}>x</div>\n          <div class=\"event__info--group\">\n            <span class=\"event__info--group-value\">${this._data.group}</span>\n          </div>\n        <div class=\"event__product\">\n          <div class=\"event__info--type\">\n            <span class=\"event__info--type-value\">${this._data.type}</span>\n          </div>\n          <div class=\"event__info--productName\">\n            <span class=\"event__info--productName-value\">${\n              this._data.productName\n            }\n            </span>\n          </div>\n          <div class=\"event__info--note\">\n            <span class=\"event__info--note-value\">${this._data.note}</span>\n          </div>\n        </div>\n        <div class=\"event__info--spend\">\n          <span class=\"event__info--spend-value\">\n            ${internationalNumberFormat.format(this._data.spend)}\n          </span>\n          <span class=\"event__info--spend-unit\">NTD</span>\n        </div>\n        <div class=\"event__info--payer\">\n          <class=\"event__info--payer-value\">付款人 : ${this._data.payer}</span>\n        </div>\n        <div class=\"event__info--sharer\">\n          <span class=\"event__info--sharer-value\">分款人 :\n          ${this._data.isAllMember ? '全員' : this._data.sharer}\n          </span>\n        </div>\n      </div>\n      `;\n  }\n}\n\nexport default new EventsView();\n","import View from '../View';\n\nclass EventsHeaderView extends View {\n  _parentElement = document.querySelector('.event-list');\n\n  _addHandlerNewEventHeader(handler) {\n    handler();\n  }\n\n  _generateMarkup() {\n    return `\n      <div class=\"event__content\">\n        <div class=\"event__content--dateHeader\">${this._data.date}</div>\n        <div class=\"event__infos Date${this._data.date}\"></div>\n      </div>\n      `;\n  }\n}\n\nexport default new EventsHeaderView();\n","import View from './View';\n\nclass BalanceView extends View {\n  _parentElement = document.querySelector('.balance__infos');\n\n  _addHandlerToggleSidebar() {\n    window.addEventListener('click', e => {\n      const balanceSidebar = document.getElementById('toggleBalanceArea');\n      const eventBalanceBtn = e.target.classList.contains(\n        'event__btn--balance'\n      );\n      const balanceCloseBtn = e.target.classList.contains(\n        'balance__btn--close'\n      );\n      const balanceArea = e.target.closest('.balance');\n\n      if (\n        eventBalanceBtn ||\n        balanceCloseBtn ||\n        balanceSidebar.checked & !balanceArea\n      ) {\n        balanceSidebar.checked = !balanceSidebar.checked;\n      }\n    });\n  }\n\n  _generateMarkup() {\n    const internationalNumberFormat = new Intl.NumberFormat('en-US');\n\n    return this._data\n      .map(\n        user => `\n      <div class=\"balance__info\" id=${user.id}>\n        <div class=\"balance__info--name\"><strong>${user.userName}</strong></div>\n        <div class=\"balance__info--money\">\n        ${\n          Number(Math.round(user.balance)) > 0\n            ? `需收${internationalNumberFormat.format(\n                Number(Math.round(user.balance))\n              )}元`\n            : Number(Math.round(user.balance)) === 0\n            ? '無'\n            : `需付${internationalNumberFormat.format(\n                Number(Math.round(-user.balance))\n              )}元\n            `\n        }\n        </div>\n      </div>`\n      )\n      .join('');\n  }\n}\n\nexport default new BalanceView();\n","import View from '../View';\nclass DebtsView extends View {\n  _parentElement = document.querySelector('.debt__infos');\n\n  _generateMarkup() {\n    const internationalNumberFormat = new Intl.NumberFormat('en-US');\n    if (this._data) {\n      return this._data\n        .map(\n          debt => `\n      <div class=\"debt__info\">\n        <span><strong>${debt.debtor}</strong></span>\n        需支付給\n        <span><strong>${\n          debt.creditor\n        }</strong></span>${internationalNumberFormat.format(\n            Number(Math.round(debt.payment))\n          )}元\n      </div>`\n        )\n        .join('');\n    } else {\n      return `<div class=\"debt__info\">尚無應收/應付帳款</div>`;\n    }\n  }\n}\n\nexport default new DebtsView();\n","'use strict';\n\nimport * as model from './model';\nimport groupsView from './views/groupsView.js';\nimport payerView from './views/usersView/payerView.js';\nimport sharerView from './views/usersView/sharerView.js';\nimport userMngtView from './views/usersView/userMngtView.js';\nimport eventsView from './views/eventsView/eventsView.js';\nimport eventsHeaderView from './views/eventsView/eventsHeaderView.js';\nimport balanceView from './views/balanceView.js';\nimport debtsView from './views/usersView/debtsView';\n\nconst controlRenderAll = function () {\n  groupsView.render(model.state.groupObject);\n  payerView.render(model.state.activeGroup[0].users);\n  sharerView.render(model.state.activeGroup[0].users);\n  userMngtView.render(model.state.activeGroup[0].users);\n  controlRenderEvents();\n  groupsView._generateActiveGroup(model.state.activeGroup[0].id);\n};\n\n// Groups\nconst controlRenderGroups = function () {\n  groupsView.render(model.state.groupObject);\n};\n\nconst controlActiveGroup = function (id = undefined) {\n  if (!id) {\n    return model.state.activeGroup[0].id;\n  }\n\n  model.setActiveGroup(model.state.groupObject.find(group => group.id === id));\n  controlRenderAll();\n  return id;\n};\n\nconst controlCreateNewGroup = function () {\n  const newGroupName = document.querySelector('.newGroupName').value;\n  model.createNewGroup(newGroupName);\n\n  controlRenderAll();\n  groupsView._generateActiveGroup(model.state.activeGroup[0].id);\n};\n\nconst controlDeleteGroup = function (id) {\n  if (model.state.groupObject.length === 1) {\n    alert('請先新增群組，再刪除此群組');\n    return;\n  }\n\n  model.deleteGroup(id);\n  controlRenderAll();\n};\n\nconst controlReviseGroup = function (id, newGroupName) {\n  if (\n    !model.state.groupObject.some(group => group.groupName === newGroupName)\n  ) {\n    model.reviesGroupInfo(id, newGroupName);\n    model.setActiveGroup();\n    controlRenderAll();\n  } else {\n    model.setActiveGroup();\n    controlRenderAll();\n    return true;\n  }\n};\n\n//Users\nconst controlRenderPayers = function () {\n  payerView.render(model.state.activeGroup[0].users);\n};\n\nconst controlRenderSharers = function () {\n  sharerView.render(model.state.activeGroup[0].users);\n};\n\nconst controlRenderUserMngts = function () {\n  userMngtView.render(model.state.activeGroup[0].users);\n};\n\nconst controlCreateNewUser = function (newUserName) {\n  model.createNewUser(newUserName);\n  model.updateUsersBalance();\n  model.isAllMember();\n  controlRenderAll();\n};\n\nconst controlDeleteUser = function (id) {\n  model.deleteUser(id);\n  model.updateUsersBalance();\n  model.isAllMember();\n  controlRenderAll();\n};\n\n//Events\nconst controlRenderEvents = function () {\n  document.querySelector('.event-list').innerHTML = '';\n  model.state.eventDateList = [];\n  model.state.activeGroup[0].events.map(event => {\n    if (model.createEventDateHeader(event)) {\n      eventsHeaderView.render(event, false);\n    }\n    eventsView._parentElement = document.querySelector(`.Date${event.date}`);\n    eventsView.render(event, false);\n  });\n  eventsView._parentElement = document.querySelector('.event-list');\n  balanceView.render(model.state.activeGroup[0].users);\n  debtsView.render(model.debtRelationship());\n};\n\nconst controlRenderCreateNewEvents = function () {\n  model.createNewEvent();\n  controlRenderEvents();\n};\n\nconst controlDeleteEvent = function (id) {\n  model.deleteEvent(id);\n  controlRenderEvents();\n};\n\nconst controlDeleteAllLocalStorage = function () {\n  model.deleteAllLocalStorage();\n};\n\nconst controlReviseUserMngt = function (id, newUserName) {\n  if (\n    model.state.activeGroup[0].users\n      .map(user => user.userName === newUserName)\n      .includes(true)\n  ) {\n    alert('已有相同使用者，請重新輸入');\n    return;\n  }\n\n  model.reviesUserInfo(id, newUserName);\n  model.setActiveGroup();\n  controlRenderAll();\n};\nconst init = function () {\n  // Render\n  groupsView._addHandlerRender(controlRenderGroups);\n  groupsView._addHandlerAddActive(controlActiveGroup);\n  payerView._addHandlerRender(controlRenderPayers);\n  sharerView._addHandlerRender(controlRenderSharers);\n  userMngtView._addHandlerRender(controlRenderUserMngts);\n  eventsView._addHandlerRender(controlRenderEvents);\n  sharerView._addHandlerMarkSharer();\n\n  // Create\n  groupsView._addHandlerNewGroup(controlCreateNewGroup);\n  eventsView._addHandlerNewEvent(controlRenderCreateNewEvents);\n  userMngtView._addHandlerNewUser(controlCreateNewUser);\n\n  // Delete\n  eventsView._addHandlerDeleteEvent(controlDeleteEvent);\n  groupsView._addHandlerDeleteGroup(controlDeleteGroup);\n  userMngtView._addHandlerDeleteUser(controlDeleteUser);\n\n  // Revise\n  groupsView._addHandlerReviseGroup(controlReviseGroup);\n  userMngtView._addHandlerReviseUser(controlReviseUserMngt);\n\n  // ToggleVisible\n  groupsView._addHandlerToggleSidebar();\n  groupsView._addHandlerToggleCreateWindow();\n  balanceView._addHandlerToggleSidebar();\n  userMngtView._addHandlerToggleWindow();\n  userMngtView._addHandlerToggleNewUserWindow();\n  sharerView._addHandlerSelectAll();\n  eventsView._addHandlerScrolltoEventTop();\n\n  // Local Storage\n  groupsView._addHandlerDeleteAllGroups(controlDeleteAllLocalStorage);\n};\ninit();\n"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$8a418f4c2848ae4e$export$eb2fcfdbd7ba97d4","groupName","users","events","this","_getRomdomId","Math","random","toString","substr","$8a418f4c2848ae4e$export$1f44aaf2ec115b54","userName","assets","debts","group2","group","balance","$8a418f4c2848ae4e$export$d61e24a684f9e51","spend1","date1","type1","productName1","note1","payer1","payerId1","sharer1","sharerId","group1","groupId","isAllMember","spend","date","type","productName","note","payer","payerId","sharer","$8a418f4c2848ae4e$export$ca000e230c0caa3e","activeGroup","groupObject","eventDateList","$8a418f4c2848ae4e$export$8197413158a6a707","async","newGroupName","newGroup","$8a418f4c2848ae4e$export$ff4321ec4dc5a5f4","$8a418f4c2848ae4e$var$createDefaultUserObject","push","$8a418f4c2848ae4e$export$89f713d771a1016d","$8a418f4c2848ae4e$export$e05e3b2ea8255400","group3","find","index","indexOf","splice","$8a418f4c2848ae4e$var$createNewUserObject","newUserName","map","user","includes","alert","newUser","findIndex","activeGroupIndex","$8a418f4c2848ae4e$var$createNewEventObject","document","querySelector","value","Number","isFinite","newEvent","payer2","sharer2","filter","toFixed","$8a418f4c2848ae4e$var$updateUsersAmont","$8a418f4c2848ae4e$export$eda932aaf60626df","deletedEvent","event","$8a418f4c2848ae4e$var$checkSharerList","querySelectorAll","forEach","el","classList","at","$8a418f4c2848ae4e$export$659df4d2a26c0a0f","sort","a","b","Date","$8a418f4c2848ae4e$export$b1a276f0b3fb2ada","$8a418f4c2848ae4e$var$persistLocalData","$8a418f4c2848ae4e$var$getLocalData","localStorage","setItem","stringify","groupsData","getItem","activeGroupData","vh","window","innerHeight","documentElement","style","setProperty","console","log","$8a418f4c2848ae4e$var$getDeviceHeight","now","todayDate","getFullYear","getMonth","padStart","getDate","setAttribute","$8a418f4c2848ae4e$var$setDefaultDate","render","data","clear","_data","markup","_generateMarkup","_clear","_parentElement","insertAdjacentHTML","innerHTML","renderError","message","_errorMessage","icons","$f29cd6c67ea13581$export$bdfd709ae4826697","$f29cd6c67ea13581$var$bundleURL","$f29cd6c67ea13581$var$getBaseURL","url","replace","err","matches","stack","match","$f29cd6c67ea13581$var$getBundleURL","$17bb6381a11ff084$exports","getBundleURL","resolve","$28e402b465a245a3$exports","$a817540b6c0a0605$export$2e2bcd8739ae039","_group","_addHandlerRender","handler5","addEventListener","e","target","closest","contains","_addHandlerAddActive","handler1","_generateActiveGroup","_addHandlerNewGroup","handler2","newGroupForm","preventDefault","add","_addHandlerReviseGroup","handler3","e1","parentNode","children","_groupsSetDefault","_groupsSetInputField","key","dataset","name","removeAttribute","_addHandlerDeleteGroup","handler4","_addHandlerToggleSidebar","toggleGroupVisible","getElementById","eventGroupBtn","groupCloseBtn","groupArea","groupList","checked","_addHandlerToggleCreateWindow","createBtn","toggle","focus","_addHandlerDeleteAllGroups","handler","confirm","location","reload","remove","charAt","$3eec0fa4852a206a$export$2e2bcd8739ae039","join","_addHandlerMarkSharer","previousElementSibling","_addHandlerSelectAll","selectedAllCheckbox","allCheckboxes","checkbox","nextElementSibling","_addHandlerNewUser","allUserInfos","newUserForm","newUserNameInput","newUserId","scrollIntoView","block","inline","behavior","_addHandlerDeleteUser","parentElement","_addHandlerToggleWindow","eventUserMngtBtn","userMngtWindow","userMngtCloseBtn","userInfoButtons","_usersSetDefault","_addHandlerToggleNewUserWindow","createNewUserBtn","_addHandlerReviseUser","allUserNames","_usersSetInputField","_addHandlerNewEvent","_addHandlerDeleteEvent","_addHandlerScrolltoEventTop","internationalNumberFormat","Intl","NumberFormat","_addHandlerNewEventHeader","balanceSidebar","eventBalanceBtn","balanceCloseBtn","balanceArea","round","format","debt","debtor","$e59237c46c570137$var$controlRenderAll","$f071d99d844d6af8$export$2e2bcd8739ae039","$c146343140b5ba58$export$2e2bcd8739ae039","$0c930005e1755596$export$2e2bcd8739ae039","$e59237c46c570137$var$controlRenderEvents","$e59237c46c570137$var$controlRenderGroups","$e59237c46c570137$var$controlActiveGroup","$e59237c46c570137$var$controlCreateNewGroup","$e59237c46c570137$var$controlDeleteGroup","$8a418f4c2848ae4e$export$ae2679b329fc10b6","$e59237c46c570137$var$controlReviseGroup","some","$8a418f4c2848ae4e$export$f5a1daffd15b3abb","$e59237c46c570137$var$controlRenderPayers","$e59237c46c570137$var$controlRenderSharers","$e59237c46c570137$var$controlRenderUserMngts","$e59237c46c570137$var$controlCreateNewUser","$8a418f4c2848ae4e$export$b51ea21071015da9","$e59237c46c570137$var$controlDeleteUser","obj","$8a418f4c2848ae4e$export$7d0f10f273c0438a","Set","has","$8a418f4c2848ae4e$export$82f50adc1d0b1364","$eb6fac755dcba4ed$export$2e2bcd8739ae039","$2d81a2112294bca1$export$2e2bcd8739ae039","$acf9b93336633142$export$2e2bcd8739ae039","$3a4f66fa7bee2b96$export$2e2bcd8739ae039","debtRelation","renderArr","creditor","creditorPayment","debtorPayment","abs","payment","$8a418f4c2848ae4e$export$f4ea5a003fff46dd","$e59237c46c570137$var$controlRenderCreateNewEvents","$e59237c46c570137$var$controlDeleteEvent","$8a418f4c2848ae4e$export$95711ec6c6227e9a","$e59237c46c570137$var$controlDeleteAllLocalStorage","$e59237c46c570137$var$controlReviseUserMngt","groupIndex","$8a418f4c2848ae4e$export$4fcd6ef2e79fd2e5"],"version":3,"file":"index.9cbdbcd6.js.map"}