{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-d94fdafc5f0bff83.js","src/js/model.js","src/js/views/View.js","node_modules/@parcel/runtime-js/lib/runtime-de2c31975da2cbda.js","node_modules/@parcel/runtime-js/lib/runtime-51154236bfddb9aa.js","src/js/views/groupsView.js","src/js/views/usersView/payerView.js","src/js/views/usersView/sharerView.js","src/js/views/usersView/userMngtView.js","src/js/views/eventsView/eventsView.js","src/js/views/eventsView/eventsHeaderView.js","src/js/views/balanceView.js","src/js/views/usersView/debtsView.js","src/js/controller.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9fpV\\\":\\\"index.5fa25700.js\\\",\\\"hmZh1\\\":\\\"revise.809c8e4f.png\\\",\\\"048eq\\\":\\\"delete.014e6afe.png\\\"}\"));","//  Group Instance\nexport class Group {\n  constructor(groupName, users, events) {\n    this.id = this._getRomdomId();\n    this.groupName = groupName;\n    this.users = users;\n    this.events = events;\n  }\n  _getRomdomId() {\n    return 'G_' + Math.random().toString(36).substr(2, 9);\n  }\n}\n\n//  User Instance\nexport class User {\n  constructor(userName, assets, debts, group) {\n    this.id = this._getRomdomId();\n    this.userName = userName;\n    this.assets = assets;\n    this.debts = debts;\n    this.group = group;\n    this.balance = this.assets - this.debts;\n  }\n  _getRomdomId() {\n    return 'U_' + Math.random().toString(36).substr(2, 9);\n  }\n}\n\n//  Event Instance\nexport class Event {\n  // prettier-ignore\n  constructor(spend, date, type, productName, note, payer, payerId, sharer, sharerId, group, groupId, isAllMember) {\n    this.id = this._getRomdomId();\n    this.spend = spend;\n    this.date = date;\n    this.type = type;\n    this.productName = productName;\n    this.note = note;\n    this.payer = payer;\n    this.payerId = payerId;\n    this.sharer = sharer;\n    this.sharerId = sharerId;\n    this.group = group;\n    this.groupId = groupId;\n    this.isAllMember = isAllMember;\n  }\n\n  _getRomdomId() {\n    return 'E_' + Math.random().toString(36).substr(2, 9);\n  }\n}\n\nexport const state = {\n  activeGroup: [],\n  groupObject: [],\n  sharerId: [],\n  sharer: [],\n  eventDateList: [],\n};\n\n//------------------------GROUP------------------------\n\nexport const createNewGroup = async function (newGroupName) {\n  const newGroup = new Group(newGroupName, [], []);\n\n  // 將新群組設定成active\n  setActiveGroup(newGroup);\n  // 建立預設使用者\n  createDefaultUserObject(newGroup);\n  state.groupObject.push(newGroup);\n  // 更新新使用者的balance\n  updateUsersBalance();\n  storeLocalStorage();\n};\n\nexport const deleteGroup = function (id) {\n  const target = state.groupObject.find(group => group.id === id);\n  const index = state.groupObject.indexOf(target);\n  // 刪除特定群組\n  state.groupObject.splice(index, 1);\n  // 更新active群組\n  state.activeGroup.splice(0, 1);\n  state.activeGroup.push(state.groupObject[index - 1 > 0 ? index - 1 : 0]);\n  storeLocalStorage();\n};\n\nexport const setActiveGroup = async function (group = undefined) {\n  // 若group參數無值，則active群組依舊為目前的active群組\n  if (!group) {\n    const activeGroup = state.groupObject.find(\n      group => group.id === state.activeGroup[0].id\n    );\n    const index = state.groupObject.indexOf(activeGroup);\n    group = state.groupObject[index];\n  }\n\n  // 若group參數有值，設定新的active群組\n  state.activeGroup.splice(0, 1);\n  state.activeGroup.push(group);\n  storeLocalStorage();\n};\n\n//------------------------USER------------------------\n\nexport const createNewUser = function (newUserName) {\n  console.log(newUserName);\n\n  if (newUserName.value === '') {\n    alert('名稱不可為空');\n    return;\n  }\n\n  // 建立New User Instance\n  createNewUserObject(newUserName);\n  storeLocalStorage();\n  newUserName.value = '';\n};\n\nconst createNewUserObject = function (newUserName) {\n  if (\n    state.activeGroup[0].users\n      .map(user => user.userName === newUserName)\n      .includes(true)\n  ) {\n    alert('已有相同名稱，請重新命名');\n    return;\n  }\n\n  // 建立New User Instance\n  const newUser = new User(newUserName, 0, 0, state.activeGroup[0].groupName);\n  const index = state.groupObject.findIndex(\n    group => group.id === state.activeGroup[0].id\n  );\n\n  state.groupObject[index].users.push(newUser);\n  setActiveGroup(state.groupObject[index]);\n  storeLocalStorage();\n};\n\nexport const deleteUser = function (id) {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n  const obj = state.activeGroup[0].users.find(user => user.id === id);\n  const index = state.activeGroup[0].users.indexOf(obj);\n\n  if (index === 0) {\n    alert('無法刪除自己');\n    return;\n  } else if (obj.balance !== 0) {\n    alert('帳款尚未平衡');\n    return;\n  } else {\n    state.groupObject[activeGroupIndex].users.splice(index, 1);\n    setActiveGroup(state.groupObject[activeGroupIndex]);\n  }\n  storeLocalStorage();\n};\n\nconst updateUsersAmont = function (newEvent) {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  //更新使用者應收額\n  const payer = state.groupObject[activeGroupIndex].users.find(\n    payer => payer.id === `${newEvent.payerId}`\n  );\n  payer.assets = Number(payer.assets) + Number(newEvent.spend);\n\n  //更新使用者應付額\n  for (const i of newEvent.sharer) {\n    const [sharer] = state.groupObject[activeGroupIndex].users.filter(\n      sharer => sharer.id === `${newEvent.sharerId[newEvent.sharer.indexOf(i)]}`\n    );\n\n    if (!sharer) return;\n\n    sharer.debts = Number(\n      Number(sharer.debts) +\n        Number((newEvent.spend / state.sharer.length).toFixed(2))\n    ).toFixed(2);\n  }\n\n  updateUsersBalance();\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n};\n\nexport const updateUsersBalance = function () {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  //更新active群組中的user balance\n  if (!state.groupObject[activeGroupIndex]) return;\n\n  state.groupObject[activeGroupIndex].users.map(\n    user => (user.balance = user.assets - user.debts)\n  );\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n};\n\nexport const reviesUserInfo = function (id, newUserName) {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const groupIndex = state.groupObject.indexOf(activeGroup);\n  const target = state.groupObject[groupIndex].users.find(\n    user => user.id === id\n  );\n\n  target.userName = newUserName;\n};\nexport const reviesGroupInfo = function (id, newGroupName) {\n  const target = state.groupObject.find(group => group.id === id);\n\n  target.groupName = newGroupName;\n};\n\n//------------------------EVENT------------------------\n\nexport const createNewEvent = function () {\n  // 確認使用者為分款者的名單\n  checkSharerList();\n  if (state.sharerId.length === 0) {\n    alert('分款者為必填');\n    return;\n  }\n  // 建立new Event Instance\n  createNewEventObject();\n  // 透過時間排序事件\n  sortEventsOrder();\n  storeLocalStorage();\n\n  state.sharerId = [];\n  state.sharer = [];\n};\n\nconst createNewEventObject = function () {\n  const spend = document.querySelector('.event-form__input--spend');\n  const date = document.querySelector('.event-form__input--date');\n  const type = document.querySelector('.event-form__input--type');\n  const productName = document.querySelector('.event-form__input--name');\n  const note = document.querySelector('.event-form__input--note');\n  const payerId = document.querySelector('.event-form__input--payer');\n  const payer = state.activeGroup[0].users.find(\n    user => user.id === payerId.value\n  );\n\n  if (\n    !Number.isFinite(+spend.value) ||\n    Number(spend.value) < 0 ||\n    Number(spend.value) % 1 !== 0\n  ) {\n    alert('請輸入正整數');\n    state.sharerId = [];\n    state.sharer = [];\n    return;\n  }\n\n  // 建立new Event Instance\n  const newEvent = new Event(\n    spend.value,\n    date.value,\n    type.value,\n    productName.value,\n    note.value,\n    payer.userName,\n    payerId.value,\n    state.sharer,\n    state.sharerId,\n    state.activeGroup[0].groupName,\n    state.activeGroup[0].id,\n    state.sharerId.length === state.activeGroup[0].users.length ? true : false\n  );\n\n  const index = state.groupObject.findIndex(\n    group => group.id === state.activeGroup[0].id\n  );\n\n  state.groupObject[index].events.push(newEvent);\n  setActiveGroup(state.groupObject[index]);\n  updateUsersAmont(newEvent);\n  storeLocalStorage();\n};\n\nexport const deleteEvent = function (id) {\n  // 刪除特定event\n  const obj = state.activeGroup[0].events.find(event => event.id === id);\n  const index = state.activeGroup[0].events.indexOf(obj);\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  updateDeleteEventAmont(id);\n  state.groupObject[activeGroupIndex].events.splice(index, 1);\n  sortEventsOrder();\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n  storeLocalStorage();\n};\n\nexport const updateDeleteEventAmont = function (id) {\n  // 更新被刪除event中使用者數值\n\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  const deletedEvent = state.groupObject[activeGroupIndex].events.find(\n    event => event.id === id\n  );\n\n  //更新收款者的值;\n  const payer = state.groupObject[activeGroupIndex].users.find(\n    user => user.id === deletedEvent.payerId\n  );\n\n  payer.assets = Number(payer.assets) - Number(deletedEvent.spend);\n\n  //更新分款者的值;\n  for (const i of deletedEvent.sharer) {\n    const [sharer] = state.groupObject[activeGroupIndex].users.filter(\n      user =>\n        user.id === `${deletedEvent.sharerId[deletedEvent.sharer.indexOf(i)]}`\n    );\n\n    if (!sharer) return;\n\n    sharer.debts = Number(\n      Number(sharer.debts) -\n        Number((deletedEvent.spend / deletedEvent.sharer.length).toFixed(2))\n    ).toFixed(2);\n  }\n  // 更新使用者balance值\n  updateUsersBalance();\n};\n\nexport const createEventDateHeader = function (event) {\n  // 建立日期標誌\n  const dateSet = new Set(state.eventDateList);\n  if (dateSet.has(event.date)) return false;\n  state.eventDateList.push(event.date);\n  storeLocalStorage();\n  return true;\n};\n\nconst checkSharerList = function () {\n  // 確認使用者中誰為分款者\n  document.querySelectorAll('input[type=checkbox]:checked').forEach(el => {\n    state.sharerId.push(el.classList[1]);\n    state.sharer.push(el.value);\n    if (state.sharer.at(-1) === 'selectedAll') {\n      state.sharer.splice(-1, 1);\n      state.sharerId.splice(-1, 1);\n    }\n  });\n};\n\nexport const sortEventsOrder = function () {\n  //透過日期排序Event順序\n  state.activeGroup[0].events = state.activeGroup[0].events\n    .map(event => event)\n    .sort((a, b) => new Date(a.date) - new Date(b.date));\n};\n\n//------------------------DEBT RELATIONSHIP------------------------\n\nexport const debtRelationship = function () {\n  const debtRelation = [];\n  const renderArr = [];\n  if (!state.activeGroup[0]) return;\n\n  //在DebtRelation Array中push所有user的userName與balance\n  state.activeGroup[0].users.map(obj => {\n    debtRelation.push([`${obj.userName}`, `${obj.balance}`]);\n  });\n\n  //將DebtRelation內元素由大至小排序\n  debtRelation.sort((a, b) => b[1] - a[1]);\n\n  //宣告所需變數\n  let creditor = debtRelation[0][0];\n  let debtor = debtRelation[debtRelation.length - 1][0];\n  let creditorPayment = +debtRelation[0][1];\n  let debtorPayment = +debtRelation[debtRelation.length - 1][1];\n\n  //若DebtRelation內只有預設使用者，或是尚無應收應付帳款，則顯示尚無應收/應付帳款\n  if (\n    debtRelation.length === 1 ||\n    (creditorPayment === 0 && debtorPayment === 0)\n  )\n    return false;\n  else {\n    //若有應收/應付帳款時，執行此迴圈\n    while (creditorPayment > 0 && debtorPayment < 0) {\n      if (creditorPayment > debtorPayment) {\n        //更新debtRelation帳款\n        if (Math.abs(creditorPayment) > Math.abs(debtorPayment)) {\n          debtRelation[0][1] = creditorPayment + debtorPayment;\n          debtRelation[debtRelation.length - 1][1] =\n            debtorPayment - debtorPayment;\n\n          renderArr.push({ creditor, debtor, payment: -debtorPayment });\n        } else if (\n          Math.abs(creditorPayment) < Math.abs(debtorPayment) ||\n          (Math.abs(creditorPayment) === Math.abs(debtorPayment) &&\n            creditorPayment !== 0)\n        ) {\n          debtRelation[0][1] = creditorPayment - creditorPayment;\n          debtRelation[debtRelation.length - 1][1] =\n            debtorPayment + creditorPayment;\n          renderArr.push({ creditor, debtor, payment: creditorPayment });\n        } else {\n          return;\n        }\n\n        //重新排序debtRelation\n        debtRelation.sort((a, b) => b[1] - a[1]);\n\n        //重新宣告變數\n        creditor = debtRelation[0][0];\n        debtor = debtRelation[debtRelation.length - 1][0];\n        creditorPayment = Number(debtRelation[0][1]);\n        debtorPayment = Number(debtRelation[debtRelation.length - 1][1]);\n      }\n    }\n    return renderArr;\n  }\n};\n\n//------------------------INIT------------------------\n\nconst getDeviceHeight = () => {\n  let vh = window.innerHeight * 0.01;\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\n  console.log(`執行成功，目前高度為${vh * 100}px`);\n};\n\nconst createDefaultUserObject = function (group) {\n  // prettier-ignore\n  if (group.users.length === 0) {\n    newUser = new User('自己', 0, 0, state.activeGroup[0].groupName);\n    group.users.push(newUser);\n    setActiveGroup(group)\n  } else return;\n};\n\nexport const isAllMember = () => {\n  const activeGroup = state.groupObject.find(\n    group => group.id === state.activeGroup[0].id\n  );\n\n  const activeGroupIndex = state.groupObject.indexOf(activeGroup);\n\n  state.groupObject[activeGroupIndex].events.map(event => {\n    event.isAllMember =\n      event.sharerId.length === state.groupObject[activeGroupIndex].users.length\n        ? true\n        : false;\n  });\n\n  setActiveGroup(state.groupObject[activeGroupIndex]);\n  storeLocalStorage();\n};\n\nconst createDefaultGroupObject = function () {\n  if (state.groupObject.length === 0) {\n    createNewGroup('預設群組');\n  }\n};\n\nconst setDefaultDate = function () {\n  const now = new Date();\n  const year = now.getFullYear();\n  const month = `${now.getMonth() + 1}`.padStart(2, 0);\n  const dates = `${now.getDate()}`.padStart(2, 0);\n  const todayDate = `${year}-${month}-${dates}`;\n  const dateInput = document.querySelector('.event-form__input--date');\n  dateInput.setAttribute('value', todayDate);\n};\n\n//------------------------LOCAL STORAGE------------------------\n\nexport const storeLocalStorage = function () {\n  persistLocalData();\n  getLocalData();\n};\n\nconst persistLocalData = function () {\n  localStorage.setItem('groups', JSON.stringify(state.groupObject));\n  localStorage.setItem('activeGroup', JSON.stringify(state.activeGroup));\n};\n\nconst getLocalData = function () {\n  const groupsData = JSON.parse(localStorage.getItem('groups'));\n  const activeGroupData = JSON.parse(localStorage.getItem('activeGroup'));\n  if (!activeGroupData || !groupsData) return;\n  state.groupObject = groupsData;\n  state.activeGroup[0] = activeGroupData[0];\n};\n\nexport const deleteAllLocalStorage = () => {\n  localStorage.clear();\n};\n\nconst init = function () {\n  getDeviceHeight();\n  getLocalData();\n  createDefaultGroupObject();\n  setDefaultDate();\n  updateUsersBalance();\n  persistLocalData();\n};\n\ninit();\n","export default class View {\n  render(data, clear = true) {\n    this._data = data;\n\n    const markup = this._generateMarkup();\n    if (clear) {\n      this._clear();\n    }\n\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\n  }\n\n  _clear() {\n    this._parentElement.innerHTML = '';\n  }\n\n  renderError(message = this._errorMessage) {\n    const markup = `\n      <div class=\"error\">\n        <div>\n          <svg>\n            <use href=\"${icons}#icon-alert-triangle\"></use>\n          </svg>\n        </div>\n        <p>${message}</p>\n      </div>\n    `;\n    this._clear();\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\n  }\n\n  renderMessage(message = this._message) {\n    const markup = `\n      <div class=\"message\">\n        <div>\n          <svg>\n            <use href=\"${icons}#icon-smile\"></use>\n          </svg>\n        </div>\n        <p>${message}</p>\n      </div>\n    `;\n    this._clear();\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hmZh1\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"048eq\")).toString();","import View from './View.js';\nimport imgRevise from 'url:../../img/revise.png';\nimport imgDelete from 'url:../../img/delete.png';\n\nclass GroupsView extends View {\n  _parentElement = document.querySelector('.group-list');\n  _group = document.querySelector('.group');\n  // render all groups\n  _addHandlerRender(handler) {\n    window.addEventListener('load', handler);\n    this._group.addEventListener('click', e => {\n      if (\n        !e.target.closest('.group') ||\n        e.target.classList.contains('group__item--revise') ||\n        e.target.classList.contains('group__item--delete')\n      )\n        return;\n      handler();\n    });\n  }\n\n  _addHandlerAddActive(handler) {\n    window.addEventListener('load', () => {\n      this._generateActiveGroup(handler());\n    });\n\n    this._group.addEventListener('click', e => {\n      if (\n        e.target.classList.contains('group__item--delete') ||\n        e.target.classList.contains('group__item--revise')\n      ) {\n        return;\n      }\n\n      if (!e.target.closest('.group-list__info')) {\n        this._generateActiveGroup(handler());\n        return;\n      }\n\n      const target = e.target.closest('.group-list__info').classList[1];\n      this._generateActiveGroup(handler(target));\n    });\n  }\n\n  _addHandlerNewGroup(handler) {\n    const newGroupForm = document.querySelector('.group-create__form');\n    const newGroupName = document.querySelector('.newGroupName');\n\n    newGroupForm.addEventListener('submit', e => {\n      e.preventDefault();\n      handler();\n      newGroupName.value = '';\n      newGroupForm.classList.add('hidden');\n    });\n  }\n\n  _addHandlerReviseGroup(handler) {\n    this._parentElement.addEventListener('click', e => {\n      if (!e.target.classList.contains('group__item--revise')) return;\n\n      const target = e.target.parentNode.parentNode.classList[1];\n      const newGroupName = e.target.parentNode.children[1];\n\n      this._groupsSetDefault();\n      this._groupsSetInputField(newGroupName);\n\n      newGroupName.addEventListener('keypress', e => {\n        if (e.key !== 'Enter') return;\n\n        if (newGroupName.value === '') {\n          newGroupName.setAttribute('value', newGroupName.dataset.name);\n        }\n\n        if (newGroupName.value !== '') {\n          if (handler(target, newGroupName.value)) {\n            alert('已有相同群組，請重新命名');\n            newGroupName.value = '';\n            return;\n          }\n\n          e.preventDefault();\n          newGroupName.setAttribute('value', newGroupName.value);\n          handler(target, newGroupName.value);\n        }\n        newGroupName.setAttribute('readonly', '');\n        newGroupName.removeAttribute('placeholder');\n      });\n    });\n  }\n\n  _addHandlerDeleteGroup(handler) {\n    this._parentElement.addEventListener('click', function (e) {\n      if (!e.target.closest('.group__item--delete')) return;\n      const target = e.target.closest('.group-list__info').classList[1];\n      handler(target);\n    });\n  }\n\n  _addHandlerToggleSidebar() {\n    window.addEventListener('click', e => {\n      const toggleGroupVisible = document.getElementById('toggleGroupArea');\n      const eventGroupBtn = e.target.classList.contains('event__btn--groups');\n      const groupCloseBtn = e.target.classList.contains('group__btn--close');\n      const groupArea = e.target.closest('.group');\n      const groupList = e.target.closest('.group-list__info');\n\n      if (\n        eventGroupBtn ||\n        groupCloseBtn ||\n        (toggleGroupVisible.checked && !groupArea && !groupList)\n      ) {\n        this._groupsSetDefault();\n        toggleGroupVisible.checked = !toggleGroupVisible.checked;\n      }\n    });\n  }\n\n  _addHandlerToggleCreateWindow() {\n    const createBtn = document.querySelector('.group-create__btn');\n    const newGroupForm = document.querySelector('.group-create__form');\n    const newGroupName = document.querySelector('.newGroupName');\n    createBtn.addEventListener('click', function () {\n      newGroupForm.classList.toggle('hidden');\n      newGroupName.focus();\n    });\n  }\n\n  _groupsSetDefault = function () {\n    const allGroupNames = document.querySelectorAll(\n      '.group-list__info .group__item--headline'\n    );\n\n    allGroupNames.forEach(users => {\n      users.setAttribute('readonly', '');\n      users.removeAttribute('placeholder');\n      users.value = users.dataset.name;\n      // console.log(users);\n    });\n  };\n\n  _groupsSetInputField = function (newGroupName) {\n    // console.log(newGroupName);\n    newGroupName.removeAttribute('readonly');\n    newGroupName.value = '';\n    newGroupName.setAttribute('placeholder', '新群組名');\n    newGroupName.focus();\n  };\n\n  _addHandlerDeleteAllGroups = function (handler) {\n    window.addEventListener('click', e => {\n      if (!e.target.classList.contains('event__btn--deleteAllInfo')) return;\n\n      const firstCheck = confirm(\n        '您確定要刪除所有資料嗎？將會刪除所有的群組、使用者及記錄。'\n      );\n\n      if (firstCheck) {\n        const secondCheck = confirm('您確定嗎？');\n        if (secondCheck) {\n          handler();\n          alert('所有資料已被刪除！');\n          location.reload();\n        } else return;\n      } else return;\n    });\n  };\n\n  _generateActiveGroup(id) {\n    const allGroup = document.querySelectorAll('.group-list__info');\n    allGroup.forEach(group => {\n      group.classList.remove('active');\n    });\n\n    if (!document.querySelector(`.${id}`)) {\n      return;\n    }\n\n    document.querySelector(`.${id}`).classList.add('active');\n  }\n\n  _generateMarkup() {\n    return this._data\n      .map(\n        group => `\n      <div class=\"group-list__info ${group.id}\">\n        <div class=\"group__items\">\n          <div class=\"group__item--icon\">\n            <span>${group.groupName.charAt(0)}</span>\n          </div>\n          <input\n            class=\"group__item--headline\"\n            autocomplete=\"off\"\n            readonly\n            required\n            maxlength=\"5\"\n            placeholder=\"\"\n            value=\"${group.groupName}\"\n            data-name=\"${group.groupName}\"\n          />\n          <div class=\"group__item--subhead\">\n            ${group.users.length}位成員\n          </div>\n          <img class=\"group__item--revise\" src=\"${imgRevise}\"></img>\n          <img class=\"group__item--delete\" src=\"${imgDelete}\"></img>\n        </div>\n      </div>`\n      )\n      .reverse()\n      .join('');\n  }\n}\n\nexport default new GroupsView();\n","import View from '../View';\nclass PayerView extends View {\n  _parentElement = document.querySelector('.event-form__input--payer');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', () => {\n      handler();\n    });\n  }\n\n  _generateMarkup() {\n    return this._data\n      .map(user => `<option value=\"${user.id}\">${user.userName}</option>`)\n      .join('');\n  }\n}\n\nexport default new PayerView();\n","import View from '../View';\nclass SharerView extends View {\n  _parentElement = document.querySelector('.event-form__input--sharers');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', () => {\n      handler();\n    });\n  }\n\n  _addHandlerMarkSharer() {\n    this._parentElement.addEventListener('click', e => {\n      if (!e.target.classList.contains('event-form__input--sharer')) return;\n\n      if (!e.target.previousElementSibling.checked) {\n        e.target.classList.add('checked');\n      }\n      if (e.target.previousElementSibling.checked) {\n        e.target.classList.remove('checked');\n      }\n    });\n  }\n\n  _addHandlerSelectAll() {\n    window.addEventListener('click', e => {\n      if (!e.target.classList.contains('selectedAll')) return;\n      const selectedAllCheckbox = document.querySelector(\n        '.selectedAllCheckbox'\n      );\n      const allCheckboxes = document.querySelectorAll('.checkbox');\n\n      if (!selectedAllCheckbox.checked) {\n        allCheckboxes.forEach(checkbox => {\n          checkbox.checked = true;\n          checkbox.nextElementSibling.classList.add('checked');\n        });\n      }\n\n      if (selectedAllCheckbox.checked) {\n        allCheckboxes.forEach(checkbox => {\n          checkbox.checked = false;\n          checkbox.nextElementSibling.classList.remove('checked');\n        });\n        return;\n      }\n    });\n  }\n\n  _generateMarkup() {\n    return (\n      this._data\n        .map(\n          user => `\n        <input class=\"checkbox ${user.id}\" type=\"checkbox\" id=\"${user.id}\" value=\"${user.userName}\"/>\n        <label class=\"event-form__input--sharer\" for=\"${user.id}\">${user.userName}</label>\n        `\n        )\n        .join('') +\n      (this._data.length > 1\n        ? `\n        <input class=\"selectedAllCheckbox\" type=\"checkbox\" id=\"selectedAll\" value = \"selectedAll\">\n        <label class=\"event-form__input--sharer selectedAll\" for=\"selectedAll\">全選</label>\n        `\n        : '')\n    );\n    // : '';\n    // this._data.length >\n    // 1\n    // ? `\n    // <input class=\"checkbox selectedAll\" type=\"checkbox\" id=\"selectedAll\" value=\"全選\"/>\n    // <label class=\"event-form__input--sharer\" for=\"selectedAll\">全選</label>\n    //   `\n    // : '';\n  }\n}\n\nexport default new SharerView();\n","import View from '../View.js';\nimport imgRevise from 'url:../../../img/revise.png';\nimport imgDelete from 'url:../../../img/delete.png';\n\nclass UserMgntView extends View {\n  _parentElement = document.querySelector('.user__infos');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', handler);\n  }\n\n  _addHandlerNewUser(handler) {\n    const newUserName = document.querySelector(\n      '.user-form__input--newUserName'\n    );\n    const allUserInfos = document.querySelector('.user__infos');\n    const newUserForm = document.querySelector('.user-form');\n    const newUserNameInput = document.querySelector(\n      '.user-form__input--newUserName'\n    );\n\n    newUserForm.addEventListener('submit', e => {\n      e.preventDefault();\n      handler(newUserName.value);\n\n      const newUserId =\n        allUserInfos.children[allUserInfos.children.length - 1].id;\n\n      document.querySelector(`.user__info #${newUserId}`).scrollIntoView({\n        block: 'start',\n        inline: 'nearest',\n        behavior: 'smooth',\n      });\n\n      newUserNameInput.value = '';\n    });\n  }\n\n  _addHandlerDeleteUser(handler) {\n    document.querySelector('.userMngt').addEventListener('click', e => {\n      if (!e.target.classList.contains('user__info__btn--delete')) return;\n      const target = e.target.parentElement.parentElement.id;\n      handler(target);\n    });\n  }\n\n  _addHandlerToggleWindow() {\n    window.addEventListener('click', e => {\n      const eventUserMngtBtn = e.target.classList.contains(\n        'event__btn--usersMngt'\n      );\n      const userMngtWindow = document.querySelector('.userMngt');\n      const userMngtCloseBtn = e.target.classList.contains(\n        'userMngt__btn--close'\n      );\n      const userInfoButtons = e.target.closest('.user__info__btns');\n      const newUserForm = document.querySelector('.user-form');\n\n      // e.target.closest('.userMngt');\n      if (\n        eventUserMngtBtn ||\n        userMngtCloseBtn ||\n        (!userMngtWindow.classList.contains('hidden') &&\n          !e.target.closest('.userMngt') &&\n          !userInfoButtons)\n      ) {\n        userMngtWindow.classList.toggle('hidden');\n        this._usersSetDefault();\n        newUserForm.classList.add('hidden');\n      }\n    });\n  }\n\n  _addHandlerToggleNewUserWindow() {\n    const createNewUserBtn = document.querySelector(\n      '.userMngt-header__btn--createNewUser'\n    );\n    const newUserName = document.querySelector(\n      '.user-form__input--newUserName'\n    );\n\n    createNewUserBtn.addEventListener('click', function () {\n      const newUserForm = document.querySelector('.user-form');\n\n      newUserForm.classList.toggle('hidden');\n      newUserName.focus();\n    });\n  }\n\n  _addHandlerReviseUser(handler) {\n    this._parentElement.addEventListener('click', e => {\n      if (!e.target.classList.contains('user__info__btn--revise')) return;\n      const allUserNames = document.querySelectorAll('.user__info--name');\n      const target = e.target.parentNode.parentNode.id;\n      const userName = e.target.parentNode.parentNode.children[0];\n\n      this._usersSetDefault();\n      this._usersSetInputField(userName);\n\n      allUserNames.forEach(user =>\n        user.addEventListener('keypress', e => {\n          if (e.key === 'Enter') {\n            if (userName.value === '') {\n              userName.setAttribute('value', userName.dataset.name);\n            } else {\n              userName.setAttribute('value', userName.value);\n            }\n            userName.setAttribute('readonly', '');\n            userName.removeAttribute('placeholder');\n            handler(target, userName.value);\n          } else {\n            return;\n          }\n        })\n      );\n    });\n  }\n\n  _usersSetDefault = function () {\n    const allUserNames = document.querySelectorAll('.user__info--name');\n\n    allUserNames.forEach(user => {\n      user.setAttribute('readonly', '');\n      user.removeAttribute('placeholder');\n      user.value = user.dataset.name;\n    });\n  };\n\n  _usersSetInputField = function (userName) {\n    userName.setAttribute('data-name', userName.value);\n    userName.removeAttribute('readonly');\n    userName.removeAttribute('value');\n    userName.setAttribute('placeholder', '請輸入新名稱');\n    userName.value = '';\n    userName.focus();\n  };\n  // _userRevise(e) {\n  //   const userNames = document.querySelectorAll('.user__info--name');\n  //   if (!e.target.classList.contains('user__btn--revise')) return;\n\n  //   const obj = model.state.activeGroup[0].users.find(\n  //     obj => obj.id === e.target.parentNode.parentNode.id\n  //   );\n  //   const userName = e.target.parentNode.parentNode.children[0];\n\n  //   userNames.forEach(users => {\n  //     users.setAttribute('readonly', '');\n  //     users.removeAttribute('placeholder');\n  //     users.value = users.dataset.name;\n  //   });\n\n  //   userName.setAttribute('data-name', userName.value);\n  //   userName.removeAttribute('readonly');\n  //   userName.removeAttribute('value');\n  //   userName.setAttribute('placeholder', '請輸入新名稱');\n  //   userName.value = '';\n  //   userName.focus();\n\n  //   document.querySelector('.user__btn--OK').addEventListener(\n  //     'click',\n  //     () => {\n  //       if (\n  //         model.state.activeGroup[0].users\n  //           .map(user => user.userName === userName.value)\n  //           .includes(true)\n  //       ) {\n  //         alert('已有相同名稱，請重新輸入');\n  //         userName.value = '';\n\n  //         return;\n  //       }\n\n  //       if (userName.value === '') {\n  //         userName.setAttribute('value', userName.dataset.name);\n  //       } else {\n  //         userName.setAttribute('value', userName.value);\n  //         obj.userName = userName.value;\n  //       }\n  //       userName.setAttribute('readonly', '');\n  //       userName.removeAttribute('placeholder');\n  //       this._renderAll();\n  //       model.storeLocalStorage();\n  //     },\n  //     { once: true }\n  //   );\n\n  //   document\n  //     .querySelectorAll('.user__info--name')\n\n  //     .forEach(user =>\n  //       user.addEventListener('keypress', e => {\n  //         if (e.key === 'Enter') {\n  //           if (\n  //             model.state.activeGroup[0].users\n  //               .map(user => user.userName === userName.value)\n  //               .includes(true)\n  //           ) {\n  //             alert('已有相同名稱，請重新輸入');\n  //             userName.value = '';\n  //             return;\n  //           }\n\n  //           if (userName.value === '') {\n  //             userName.setAttribute('value', userName.dataset.name);\n  //           } else {\n  //             userName.setAttribute('value', userName.value);\n  //             obj.userName = userName.value;\n  //           }\n  //           userName.setAttribute('readonly', '');\n  //           userName.removeAttribute('placeholder');\n  //           this._renderAll();\n  //           model.storeLocalStorage();\n  //         } else {\n  //           return;\n  //         }\n  //       })\n  //     );\n  // }\n\n  _generateMarkup() {\n    return this._data\n      .map(\n        user => `\n        <div class=\"user__info\" id=${user.id}>\n          <input class=\"user__info--name\" id=${user.id} maxlength=\"5\" autocomplete=\"off\" readonly value=\"${user.userName}\" data-name=\"${user.userName}\">\n\n          <div class=\"user__info__btns\">\n            <img class=\"user__info__btn--revise\"src=\"${imgRevise}\"></img>\n            <img class=\"user__info__btn--delete\"src=\"${imgDelete}\"></img>\n          </div>\n      </div>`\n      )\n      .join('');\n  }\n}\n\nexport default new UserMgntView();\n","import View from '../View';\n\nclass EventsView extends View {\n  _parentElement = document.querySelector('.event-list');\n\n  _addHandlerRender(handler) {\n    window.addEventListener('load', handler);\n  }\n  _addHandlerNewEvent(handler) {\n    const eventForm = document.querySelector('.event-form');\n    const spendInput = document.querySelector('.event-form__input--spend');\n    const nameInput = document.querySelector('.event-form__input--name');\n\n    eventForm.addEventListener('submit', function (e) {\n      e.preventDefault();\n      handler();\n      spendInput.value = '';\n      nameInput.value = '';\n    });\n  }\n\n  _addHandlerDeleteEvent(handler) {\n    this._parentElement.addEventListener('click', function (e) {\n      const target = e.target.id;\n      if (!e.target.classList.contains('event__info__btn--delete')) return;\n      handler(target);\n    });\n  }\n\n  _addHandlerScrolltoEventTop() {\n    window.addEventListener('click', function (e) {\n      if (!e.target.classList.contains('event__btn--gotoTop')) return;\n\n      document.querySelector('.event__content')?.scrollIntoView({\n        block: 'start',\n        inline: 'nearest',\n        behavior: 'smooth',\n      });\n    });\n  }\n\n  _generateMarkup() {\n    const internationalNumberFormat = new Intl.NumberFormat('en-US');\n\n    return ` \n      <div class=\"event__info\">\n        <div class=\"event__info__btn--delete\" id=${this._data.id}>x</div>\n          <div class=\"event__info--group\">\n            <span class=\"event__info--group-value\">${this._data.group}</span>\n          </div>\n        <div class=\"event__product\">\n          <div class=\"event__info--type\">\n            <span class=\"event__info--type-value\">${this._data.type}</span>\n          </div>\n          <div class=\"event__info--productName\">\n            <span class=\"event__info--productName-value\">${\n              this._data.productName\n            }\n            </span>\n          </div>\n          <div class=\"event__info--note\">\n            <span class=\"event__info--note-value\">${this._data.note}</span>\n          </div>\n        </div>\n        <div class=\"event__info--spend\">\n          <span class=\"event__info--spend-value\">\n            ${internationalNumberFormat.format(this._data.spend)}\n          </span>\n          <span class=\"event__info--spend-unit\">NTD</span>\n        </div>\n        <div class=\"event__info--payer\">\n          <class=\"event__info--payer-value\">付款人 : ${this._data.payer}</span>\n        </div>\n        <div class=\"event__info--sharer\">\n          <span class=\"event__info--sharer-value\">分款人 :\n          ${this._data.isAllMember ? '全員' : this._data.sharer}\n          </span>\n        </div>\n      </div>\n      `;\n  }\n}\n\nexport default new EventsView();\n","import View from '../View';\n\nclass EventsHeaderView extends View {\n  _parentElement = document.querySelector('.event-list');\n\n  _addHandlerNewEventHeader(handler) {\n    handler();\n  }\n\n  _generateMarkup() {\n    return `\n      <div class=\"event__content\">\n        <div class=\"event__content--dateHeader\">${this._data.date}</div>\n        <div class=\"event__infos Date${this._data.date}\"></div>\n      </div>\n      `;\n  }\n}\n\nexport default new EventsHeaderView();\n","import View from './View';\n\nclass BalanceView extends View {\n  _parentElement = document.querySelector('.balance__infos');\n\n  _addHandlerToggleSidebar() {\n    window.addEventListener('click', e => {\n      const balanceSidebar = document.getElementById('toggleBalanceArea');\n      const eventBalanceBtn = e.target.classList.contains(\n        'event__btn--balance'\n      );\n      const balanceCloseBtn = e.target.classList.contains(\n        'balance__btn--close'\n      );\n      const balanceArea = e.target.closest('.balance');\n\n      if (\n        eventBalanceBtn ||\n        balanceCloseBtn ||\n        balanceSidebar.checked & !balanceArea\n      ) {\n        balanceSidebar.checked = !balanceSidebar.checked;\n      }\n    });\n  }\n\n  _generateMarkup() {\n    const internationalNumberFormat = new Intl.NumberFormat('en-US');\n\n    return this._data\n      .map(\n        user => `\n      <div class=\"balance__info\" id=${user.id}>\n        <div class=\"balance__info--name\"><strong>${user.userName}</strong></div>\n        <div class=\"balance__info--money\">\n        ${\n          Number(Math.round(user.balance)) > 0\n            ? `需收${internationalNumberFormat.format(\n                Number(Math.round(user.balance))\n              )}元`\n            : Number(Math.round(user.balance)) === 0\n            ? '無'\n            : `需付${internationalNumberFormat.format(\n                Number(Math.round(-user.balance))\n              )}元\n            `\n        }\n        </div>\n      </div>`\n      )\n      .join('');\n  }\n}\n\nexport default new BalanceView();\n","import View from '../View';\nclass DebtsView extends View {\n  _parentElement = document.querySelector('.debt__infos');\n\n  _generateMarkup() {\n    const internationalNumberFormat = new Intl.NumberFormat('en-US');\n    if (this._data) {\n      return this._data\n        .map(\n          debt => `\n      <div class=\"debt__info\">\n        <span><strong>${debt.debtor}</strong></span>\n        需支付給\n        <span><strong>${\n          debt.creditor\n        }</strong></span>${internationalNumberFormat.format(\n            Number(Math.round(debt.payment))\n          )}元\n      </div>`\n        )\n        .join('');\n    } else {\n      return `<div class=\"debt__info\">尚無應收/應付帳款</div>`;\n    }\n  }\n}\n\nexport default new DebtsView();\n","'use strict';\n\nimport * as model from './model';\nimport groupsView from './views/groupsView.js';\nimport payerView from './views/usersView/payerView.js';\nimport sharerView from './views/usersView/sharerView.js';\nimport userMngtView from './views/usersView/userMngtView.js';\nimport eventsView from './views/eventsView/eventsView.js';\nimport eventsHeaderView from './views/eventsView/eventsHeaderView.js';\nimport balanceView from './views/balanceView.js';\nimport debtsView from './views/usersView/debtsView';\n\nconst controlRenderAll = function () {\n  groupsView.render(model.state.groupObject);\n  payerView.render(model.state.activeGroup[0].users);\n  sharerView.render(model.state.activeGroup[0].users);\n  userMngtView.render(model.state.activeGroup[0].users);\n  groupsView._generateActiveGroup(model.state.activeGroup[0].id);\n  controlRenderEvents();\n};\n\n// Groups\nconst controlRenderGroups = function () {\n  groupsView.render(model.state.groupObject);\n};\n\nconst controlActiveGroup = function (id = undefined) {\n  if (!id) {\n    return model.state.activeGroup[0].id;\n  }\n\n  model.setActiveGroup(model.state.groupObject.find(group => group.id === id));\n  controlRenderAll();\n  return id;\n};\n\nconst controlCreateNewGroup = function () {\n  const newGroupName = document.querySelector('.newGroupName').value;\n  model.createNewGroup(newGroupName);\n\n  controlRenderAll();\n  groupsView._generateActiveGroup(model.state.activeGroup[0].id);\n};\n\nconst controlDeleteGroup = function (id) {\n  if (model.state.groupObject.length === 1) {\n    alert('請先新增群組，再刪除此群組');\n    return;\n  }\n\n  model.deleteGroup(id);\n  controlRenderAll();\n};\n\nconst controlReviseGroup = function (id, newGroupName) {\n  if (\n    !model.state.groupObject.some(group => group.groupName === newGroupName)\n  ) {\n    model.reviesGroupInfo(id, newGroupName);\n    model.setActiveGroup();\n    controlRenderAll();\n  } else {\n    model.setActiveGroup();\n    controlRenderAll();\n    return true;\n  }\n};\n\n//Users\nconst controlRenderPayers = function () {\n  payerView.render(model.state.activeGroup[0].users);\n};\n\nconst controlRenderSharers = function () {\n  sharerView.render(model.state.activeGroup[0].users);\n};\n\nconst controlRenderUserMngts = function () {\n  userMngtView.render(model.state.activeGroup[0].users);\n};\n\nconst controlCreateNewUser = function (newUserName) {\n  model.createNewUser(newUserName);\n  model.updateUsersBalance();\n  model.isAllMember();\n  controlRenderAll();\n};\n\nconst controlDeleteUser = function (id) {\n  model.deleteUser(id);\n  model.updateUsersBalance();\n  model.isAllMember();\n  controlRenderAll();\n};\n\n//Events\nconst controlRenderEvents = function () {\n  document.querySelector('.event-list').innerHTML = '';\n  model.state.eventDateList = [];\n  model.state.activeGroup[0].events.map(event => {\n    if (model.createEventDateHeader(event)) {\n      eventsHeaderView.render(event, false);\n    }\n    eventsView._parentElement = document.querySelector(`.Date${event.date}`);\n    eventsView.render(event, false);\n  });\n  eventsView._parentElement = document.querySelector('.event-list');\n  balanceView.render(model.state.activeGroup[0].users);\n  debtsView.render(model.debtRelationship());\n};\n\nconst controlRenderCreateNewEvents = function () {\n  model.createNewEvent();\n  controlRenderEvents();\n};\n\nconst controlDeleteEvent = function (id) {\n  model.deleteEvent(id);\n  controlRenderEvents();\n};\n\nconst controlDeleteAllLocalStorage = function () {\n  model.deleteAllLocalStorage();\n};\n\nconst controlReviseUserMngt = function (id, newUserName) {\n  if (\n    model.state.activeGroup[0].users\n      .map(user => user.userName === newUserName)\n      .includes(true)\n  ) {\n    alert('已有相同使用者，請重新輸入');\n    return;\n  }\n\n  model.reviesUserInfo(id, newUserName);\n  model.setActiveGroup();\n  controlRenderAll();\n};\nconst init = function () {\n  // Render\n  groupsView._addHandlerRender(controlRenderGroups);\n  groupsView._addHandlerAddActive(controlActiveGroup);\n  payerView._addHandlerRender(controlRenderPayers);\n  sharerView._addHandlerRender(controlRenderSharers);\n  userMngtView._addHandlerRender(controlRenderUserMngts);\n  eventsView._addHandlerRender(controlRenderEvents);\n  sharerView._addHandlerMarkSharer();\n\n  // Create\n  groupsView._addHandlerNewGroup(controlCreateNewGroup);\n  eventsView._addHandlerNewEvent(controlRenderCreateNewEvents);\n  userMngtView._addHandlerNewUser(controlCreateNewUser);\n\n  // Delete\n  eventsView._addHandlerDeleteEvent(controlDeleteEvent);\n  groupsView._addHandlerDeleteGroup(controlDeleteGroup);\n  userMngtView._addHandlerDeleteUser(controlDeleteUser);\n\n  // Revise\n  groupsView._addHandlerReviseGroup(controlReviseGroup);\n  userMngtView._addHandlerReviseUser(controlReviseUserMngt);\n\n  // ToggleVisible\n  groupsView._addHandlerToggleSidebar();\n  groupsView._addHandlerToggleCreateWindow();\n  balanceView._addHandlerToggleSidebar();\n  userMngtView._addHandlerToggleWindow();\n  userMngtView._addHandlerToggleNewUserWindow();\n  sharerView._addHandlerSelectAll();\n  eventsView._addHandlerScrolltoEventTop();\n\n  // Local Storage\n  groupsView._addHandlerDeleteAllGroups(controlDeleteAllLocalStorage);\n};\ninit();\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$0f1d4402dffacf5b$export$eb2fcfdbd7ba97d4","groupName","users","events","this","_getRomdomId","Math","random","toString","substr","$0f1d4402dffacf5b$export$1f44aaf2ec115b54","userName","assets","debts","group","balance","$0f1d4402dffacf5b$export$d61e24a684f9e51","spend","date","type","productName","note","payer","payerId","sharer","sharerId","groupId","$0f1d4402dffacf5b$export$b1a276f0b3fb2ada","isAllMember","$0f1d4402dffacf5b$export$ca000e230c0caa3e","activeGroup","groupObject","eventDateList","$0f1d4402dffacf5b$export$8197413158a6a707","async","newGroupName","newGroup","$0f1d4402dffacf5b$export$ff4321ec4dc5a5f4","$0f1d4402dffacf5b$var$createDefaultUserObject","push","$0f1d4402dffacf5b$export$89f713d771a1016d","$0f1d4402dffacf5b$export$e05e3b2ea8255400","group1","find","index","indexOf","splice","$0f1d4402dffacf5b$var$createNewUserObject","newUserName","map","user","includes","alert","newUser","findIndex","activeGroupIndex","$0f1d4402dffacf5b$var$createNewEventObject","document","querySelector","value","Number","isFinite","newEvent","payer1","sharer1","filter","toFixed","$0f1d4402dffacf5b$var$updateUsersAmont","$0f1d4402dffacf5b$export$eda932aaf60626df","deletedEvent","event","$0f1d4402dffacf5b$var$checkSharerList","querySelectorAll","forEach","el","classList","at","$0f1d4402dffacf5b$export$659df4d2a26c0a0f","sort","a","b","Date","$0f1d4402dffacf5b$var$persistLocalData","$0f1d4402dffacf5b$var$getLocalData","localStorage","setItem","stringify","groupsData","getItem","activeGroupData","vh","window","innerHeight","documentElement","style","setProperty","console","log","$0f1d4402dffacf5b$var$getDeviceHeight","now","todayDate","getFullYear","getMonth","padStart","getDate","setAttribute","$0f1d4402dffacf5b$var$setDefaultDate","render","data","clear","_data","markup","_generateMarkup","_clear","_parentElement","insertAdjacentHTML","innerHTML","renderError","message","_errorMessage","icons","renderMessage","_message","$cc71ecdea8312f2a$exports","URL","resolve","import","meta","url","$e54ca6e73e065102$exports","$a4ebfc5039d1fb5a$export$2e2bcd8739ae039","$3a07c34e115c11c9$export$2e2bcd8739ae039","_group","_addHandlerRender","handler","addEventListener","e","target","closest","contains","_addHandlerAddActive","_generateActiveGroup","_addHandlerNewGroup","newGroupForm","preventDefault","add","_addHandlerReviseGroup","e1","parentNode","children","_groupsSetDefault","_groupsSetInputField","key","dataset","name","removeAttribute","_addHandlerDeleteGroup","_addHandlerToggleSidebar","toggleGroupVisible","getElementById","eventGroupBtn","groupCloseBtn","groupArea","groupList","checked","_addHandlerToggleCreateWindow","createBtn","toggle","focus","_addHandlerDeleteAllGroups","confirm","location","reload","remove","charAt","$parcel$interopDefault","reverse","join","$10498fa41a0d2d21$export$2e2bcd8739ae039","$d12032d4edb7ba3f$export$2e2bcd8739ae039","_addHandlerMarkSharer","previousElementSibling","_addHandlerSelectAll","selectedAllCheckbox","allCheckboxes","checkbox","nextElementSibling","$e6499a9c99eaf53c$export$2e2bcd8739ae039","_addHandlerNewUser","allUserInfos","newUserForm","newUserNameInput","newUserId","scrollIntoView","block","inline","behavior","_addHandlerDeleteUser","parentElement","_addHandlerToggleWindow","eventUserMngtBtn","userMngtWindow","userMngtCloseBtn","userInfoButtons","_usersSetDefault","_addHandlerToggleNewUserWindow","createNewUserBtn","_addHandlerReviseUser","allUserNames","_usersSetInputField","$29dbe9f3dd092b1c$export$2e2bcd8739ae039","_addHandlerNewEvent","eventForm","spendInput","nameInput","_addHandlerDeleteEvent","_addHandlerScrolltoEventTop","internationalNumberFormat","Intl","NumberFormat","format","$d6fcfc377e80c42c$export$2e2bcd8739ae039","_addHandlerNewEventHeader","$9cb5045116fddc3d$export$2e2bcd8739ae039","balanceSidebar","eventBalanceBtn","balanceCloseBtn","balanceArea","round","$f5fffd9c5ab4ba74$export$2e2bcd8739ae039","debt","debtor","creditor","payment","$f50bd1f2915ed0f2$var$controlRenderAll","$f50bd1f2915ed0f2$var$controlRenderEvents","$f50bd1f2915ed0f2$var$controlRenderGroups","$f50bd1f2915ed0f2$var$controlActiveGroup","$f50bd1f2915ed0f2$var$controlCreateNewGroup","$f50bd1f2915ed0f2$var$controlDeleteGroup","$0f1d4402dffacf5b$export$ae2679b329fc10b6","$f50bd1f2915ed0f2$var$controlReviseGroup","some","$0f1d4402dffacf5b$export$f5a1daffd15b3abb","$f50bd1f2915ed0f2$var$controlRenderPayers","$f50bd1f2915ed0f2$var$controlRenderSharers","$f50bd1f2915ed0f2$var$controlRenderUserMngts","$f50bd1f2915ed0f2$var$controlCreateNewUser","$0f1d4402dffacf5b$export$b51ea21071015da9","$f50bd1f2915ed0f2$var$controlDeleteUser","obj","$0f1d4402dffacf5b$export$7d0f10f273c0438a","Set","has","$0f1d4402dffacf5b$export$82f50adc1d0b1364","debtRelation","renderArr","creditorPayment","debtorPayment","abs","$0f1d4402dffacf5b$export$f4ea5a003fff46dd","$f50bd1f2915ed0f2$var$controlRenderCreateNewEvents","$f50bd1f2915ed0f2$var$controlDeleteEvent","$0f1d4402dffacf5b$export$95711ec6c6227e9a","$f50bd1f2915ed0f2$var$controlDeleteAllLocalStorage","$f50bd1f2915ed0f2$var$controlReviseUserMngt","groupIndex","$0f1d4402dffacf5b$export$4fcd6ef2e79fd2e5"],"version":3,"file":"index.5fa25700.js.map"}